"""Demo seed data for NexaTech Industries – IoT & electromechanical engineering company."""
from __future__ import annotations

import uuid
from sqlalchemy import select
from sqlalchemy.ext.asyncio import AsyncSession

from app.models.fact_sheet import FactSheet
from app.services.seed import TYPES as _META_TYPES
from app.models.relation import Relation
from app.models.tag import TagGroup, Tag, FactSheetTag

# ---------------------------------------------------------------------------
# UUID registry – deterministic refs for cross-linking
# ---------------------------------------------------------------------------
_refs: dict[str, uuid.UUID] = {}


def _id(ref: str) -> uuid.UUID:
    if ref not in _refs:
        _refs[ref] = uuid.uuid4()
    return _refs[ref]


def _fs(
    ref: str, type_: str, name: str, *,
    parent: str | None = None, subtype: str | None = None,
    desc: str | None = None, attrs: dict | None = None,
    lifecycle: dict | None = None, status: str = "ACTIVE",
    seal: str = "APPROVED", ext_id: str | None = None,
):
    d: dict = dict(
        id=_id(ref), type=type_, name=name, status=status,
        quality_seal=seal, attributes=attrs or {}, lifecycle=lifecycle or {},
    )
    if parent:
        d["parent_id"] = _id(parent)
    if subtype:
        d["subtype"] = subtype
    if desc:
        d["description"] = desc
    if ext_id:
        d["external_id"] = ext_id
    return d


def _rel(type_: str, src: str, tgt: str, attrs: dict | None = None, desc: str | None = None):
    return dict(id=uuid.uuid4(), type=type_, source_id=_id(src), target_id=_id(tgt),
                attributes=attrs or {}, description=desc)


# ===================================================================
# FACT SHEETS
# ===================================================================

# ── Organizations ─────────────────────────────────────────────────
ORGANIZATIONS = [
    _fs("org_nexatech", "Organization", "NexaTech Industries",
        subtype="legalEntity",
        desc="Global manufacturer of smart sensors, IoT gateways, and electromechanical actuators. Headquartered in Munich with 2 800 employees worldwide.",
        attrs={"headCount": 2800, "location": "Munich, Germany"},
        lifecycle={"active": "2005-03-15"}),
    # Engineering
    _fs("org_engineering", "Organization", "Engineering Division",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 650, "location": "Munich, Germany"}),
    _fs("org_hw_eng", "Organization", "Hardware Engineering",
        parent="org_engineering", subtype="team",
        attrs={"headCount": 120, "location": "Munich, Germany"}),
    _fs("org_fw_eng", "Organization", "Firmware & Embedded",
        parent="org_engineering", subtype="team",
        attrs={"headCount": 95, "location": "Munich, Germany"}),
    _fs("org_sw_eng", "Organization", "Software Engineering",
        parent="org_engineering", subtype="team",
        attrs={"headCount": 180, "location": "Munich & Berlin, Germany"}),
    _fs("org_sys_eng", "Organization", "Systems Engineering",
        parent="org_engineering", subtype="team",
        attrs={"headCount": 60, "location": "Munich, Germany"}),
    _fs("org_qa_eng", "Organization", "Quality Engineering",
        parent="org_engineering", subtype="team",
        attrs={"headCount": 45, "location": "Munich, Germany"}),
    # Manufacturing
    _fs("org_manufacturing", "Organization", "Manufacturing Division",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 800, "location": "Stuttgart, Germany"}),
    _fs("org_prod_sensors", "Organization", "Production – Sensors",
        parent="org_manufacturing", subtype="team",
        attrs={"headCount": 220, "location": "Stuttgart, Germany"}),
    _fs("org_prod_actuators", "Organization", "Production – Actuators",
        parent="org_manufacturing", subtype="team",
        attrs={"headCount": 180, "location": "Stuttgart, Germany"}),
    _fs("org_prod_gateways", "Organization", "Production – IoT Gateways",
        parent="org_manufacturing", subtype="team",
        attrs={"headCount": 150, "location": "Stuttgart, Germany"}),
    _fs("org_supply_chain", "Organization", "Supply Chain & Logistics",
        parent="org_manufacturing", subtype="team",
        attrs={"headCount": 110, "location": "Stuttgart, Germany"}),
    # Sales & Marketing
    _fs("org_sales", "Organization", "Sales & Marketing",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 420, "location": "Munich, Germany"}),
    _fs("org_emea", "Organization", "EMEA Sales",
        parent="org_sales", subtype="region",
        attrs={"headCount": 150, "location": "Munich, Germany"}),
    _fs("org_americas", "Organization", "Americas Sales",
        parent="org_sales", subtype="region",
        attrs={"headCount": 120, "location": "Chicago, USA"}),
    _fs("org_apac", "Organization", "APAC Sales",
        parent="org_sales", subtype="region",
        attrs={"headCount": 90, "location": "Shanghai, China"}),
    _fs("org_marketing", "Organization", "Marketing & Communications",
        parent="org_sales", subtype="team",
        attrs={"headCount": 60, "location": "Munich, Germany"}),
    # Operations
    _fs("org_operations", "Organization", "Operations",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 350, "location": "Munich, Germany"}),
    _fs("org_it_ops", "Organization", "IT Operations",
        parent="org_operations", subtype="team",
        attrs={"headCount": 85, "location": "Munich & Berlin, Germany"}),
    _fs("org_facilities", "Organization", "Facilities & Safety",
        parent="org_operations", subtype="team",
        attrs={"headCount": 40, "location": "Stuttgart, Germany"}),
    _fs("org_support", "Organization", "Customer Support",
        parent="org_operations", subtype="team",
        attrs={"headCount": 95, "location": "Munich, Germany"}),
    # R&D
    _fs("org_rnd", "Organization", "R&D",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 280, "location": "Munich & Berlin, Germany"}),
    _fs("org_research", "Organization", "Advanced Research",
        parent="org_rnd", subtype="team",
        attrs={"headCount": 45, "location": "Berlin, Germany"}),
    _fs("org_innovation", "Organization", "Innovation Lab",
        parent="org_rnd", subtype="team",
        attrs={"headCount": 30, "location": "Berlin, Germany"}),
    # Corporate
    _fs("org_corporate", "Organization", "Corporate",
        parent="org_nexatech", subtype="businessUnit",
        attrs={"headCount": 300, "location": "Munich, Germany"}),
    _fs("org_finance", "Organization", "Finance & Controlling",
        parent="org_corporate", subtype="team",
        attrs={"headCount": 80, "location": "Munich, Germany"}),
    _fs("org_hr", "Organization", "Human Resources",
        parent="org_corporate", subtype="team",
        attrs={"headCount": 55, "location": "Munich, Germany"}),
    _fs("org_legal", "Organization", "Legal & Compliance",
        parent="org_corporate", subtype="team",
        attrs={"headCount": 35, "location": "Munich, Germany"}),
]


# ── Business Capabilities ─────────────────────────────────────────
# capabilityLevel is auto-set by the API but we set it manually for direct DB insert
BUSINESS_CAPABILITIES = [
    # --- L1 ---
    _fs("bc_plm", "BusinessCapability", "Product Lifecycle Management",
        desc="End-to-end management of product from ideation through retirement.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),
    _fs("bc_eng_design", "BusinessCapability", "Engineering & Design",
        desc="All engineering disciplines required to design electromechanical and IoT products.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),
    _fs("bc_manufacturing", "BusinessCapability", "Manufacturing & Production",
        desc="Physical production, assembly, testing and packaging of devices.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),
    _fs("bc_scm", "BusinessCapability", "Supply Chain Management",
        desc="Procurement, vendor management, inventory and logistics.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),
    _fs("bc_sales", "BusinessCapability", "Sales & Distribution",
        desc="Lead-to-order processes, pricing, quoting and channel management.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": False}),
    _fs("bc_crm", "BusinessCapability", "Customer Relationship Management",
        desc="Customer onboarding, account management and analytics.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": False}),
    _fs("bc_service", "BusinessCapability", "Service & After-Sales",
        desc="Technical support, field service, warranty and remote monitoring.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),
    _fs("bc_corporate", "BusinessCapability", "Corporate Management",
        desc="Finance, HR, legal and strategic management functions.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": False}),
    _fs("bc_it", "BusinessCapability", "IT & Digital Infrastructure",
        desc="IT services, cybersecurity, cloud and network management.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": False}),
    _fs("bc_quality", "BusinessCapability", "Quality & Regulatory Compliance",
        desc="QMS, regulatory affairs, certifications and audits.",
        attrs={"capabilityLevel": "L1", "isCoreCapability": True}),

    # --- L2 under Product Lifecycle Management ---
    _fs("bc_prod_strategy", "BusinessCapability", "Product Strategy & Roadmapping",
        parent="bc_plm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_prod_req", "BusinessCapability", "Product Requirements Management",
        parent="bc_plm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_prod_portfolio", "BusinessCapability", "Product Portfolio Management",
        parent="bc_plm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_prod_retire", "BusinessCapability", "Product Retirement Management",
        parent="bc_plm", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Engineering & Design ---
    _fs("bc_mech_design", "BusinessCapability", "Mechanical Design",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),
    _fs("bc_elec_design", "BusinessCapability", "Electronic & PCB Design",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),
    _fs("bc_fw_dev", "BusinessCapability", "Firmware Development",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),
    _fs("bc_sw_dev", "BusinessCapability", "Software Development",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2"}),
    _fs("bc_sys_integration", "BusinessCapability", "Systems Integration",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2"}),
    _fs("bc_simulation", "BusinessCapability", "Simulation & Testing",
        parent="bc_eng_design", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Manufacturing & Production ---
    _fs("bc_prod_planning", "BusinessCapability", "Production Planning",
        parent="bc_manufacturing", attrs={"capabilityLevel": "L2"}),
    _fs("bc_prod_execution", "BusinessCapability", "Production Execution",
        parent="bc_manufacturing", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),
    _fs("bc_assembly", "BusinessCapability", "Assembly & Integration",
        parent="bc_manufacturing", attrs={"capabilityLevel": "L2"}),
    _fs("bc_test_cal", "BusinessCapability", "Testing & Calibration",
        parent="bc_manufacturing", attrs={"capabilityLevel": "L2"}),
    _fs("bc_packaging", "BusinessCapability", "Packaging & Shipping",
        parent="bc_manufacturing", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Supply Chain Management ---
    _fs("bc_procurement", "BusinessCapability", "Procurement",
        parent="bc_scm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_vendor_mgmt", "BusinessCapability", "Vendor Management",
        parent="bc_scm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_inventory", "BusinessCapability", "Inventory Management",
        parent="bc_scm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_logistics", "BusinessCapability", "Logistics & Warehousing",
        parent="bc_scm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_demand_forecast", "BusinessCapability", "Demand Forecasting",
        parent="bc_scm", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Sales & Distribution ---
    _fs("bc_lead_mgmt", "BusinessCapability", "Lead Management",
        parent="bc_sales", attrs={"capabilityLevel": "L2"}),
    _fs("bc_opp_mgmt", "BusinessCapability", "Opportunity Management",
        parent="bc_sales", attrs={"capabilityLevel": "L2"}),
    _fs("bc_order_mgmt", "BusinessCapability", "Order Management",
        parent="bc_sales", attrs={"capabilityLevel": "L2"}),
    _fs("bc_pricing", "BusinessCapability", "Pricing & Quoting",
        parent="bc_sales", attrs={"capabilityLevel": "L2"}),
    _fs("bc_channel_mgmt", "BusinessCapability", "Channel Management",
        parent="bc_sales", attrs={"capabilityLevel": "L2"}),

    # --- L2 under CRM ---
    _fs("bc_cust_onboard", "BusinessCapability", "Customer Onboarding",
        parent="bc_crm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_account_mgmt", "BusinessCapability", "Account Management",
        parent="bc_crm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_cust_comm", "BusinessCapability", "Customer Communication",
        parent="bc_crm", attrs={"capabilityLevel": "L2"}),
    _fs("bc_cust_analytics", "BusinessCapability", "Customer Analytics",
        parent="bc_crm", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Service & After-Sales ---
    _fs("bc_tech_support", "BusinessCapability", "Technical Support",
        parent="bc_service", attrs={"capabilityLevel": "L2"}),
    _fs("bc_field_service", "BusinessCapability", "Field Service Management",
        parent="bc_service", attrs={"capabilityLevel": "L2"}),
    _fs("bc_warranty", "BusinessCapability", "Warranty Management",
        parent="bc_service", attrs={"capabilityLevel": "L2"}),
    _fs("bc_spare_parts", "BusinessCapability", "Spare Parts Management",
        parent="bc_service", attrs={"capabilityLevel": "L2"}),
    _fs("bc_remote_monitor", "BusinessCapability", "Remote Monitoring & Diagnostics",
        parent="bc_service", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),

    # --- L2 under Corporate Management ---
    _fs("bc_fp_a", "BusinessCapability", "Financial Planning & Analysis",
        parent="bc_corporate", attrs={"capabilityLevel": "L2"}),
    _fs("bc_accounting", "BusinessCapability", "Accounting & Reporting",
        parent="bc_corporate", attrs={"capabilityLevel": "L2"}),
    _fs("bc_hcm", "BusinessCapability", "Human Capital Management",
        parent="bc_corporate", attrs={"capabilityLevel": "L2"}),
    _fs("bc_legal_contract", "BusinessCapability", "Legal & Contract Management",
        parent="bc_corporate", attrs={"capabilityLevel": "L2"}),
    _fs("bc_corp_strategy", "BusinessCapability", "Corporate Strategy",
        parent="bc_corporate", attrs={"capabilityLevel": "L2"}),

    # --- L2 under IT & Digital Infrastructure ---
    _fs("bc_itsm", "BusinessCapability", "IT Service Management",
        parent="bc_it", attrs={"capabilityLevel": "L2"}),
    _fs("bc_cybersecurity", "BusinessCapability", "Cybersecurity",
        parent="bc_it", attrs={"capabilityLevel": "L2", "isCoreCapability": True}),
    _fs("bc_data_mgmt", "BusinessCapability", "Data Management",
        parent="bc_it", attrs={"capabilityLevel": "L2"}),
    _fs("bc_cloud_infra", "BusinessCapability", "Cloud Infrastructure Management",
        parent="bc_it", attrs={"capabilityLevel": "L2"}),
    _fs("bc_apm", "BusinessCapability", "Application Portfolio Management",
        parent="bc_it", attrs={"capabilityLevel": "L2"}),
    _fs("bc_network", "BusinessCapability", "Network Management",
        parent="bc_it", attrs={"capabilityLevel": "L2"}),

    # --- L2 under Quality & Regulatory Compliance ---
    _fs("bc_qms", "BusinessCapability", "Quality Management System",
        parent="bc_quality", attrs={"capabilityLevel": "L2"}),
    _fs("bc_regulatory", "BusinessCapability", "Regulatory Affairs",
        parent="bc_quality", attrs={"capabilityLevel": "L2"}),
    _fs("bc_env_compliance", "BusinessCapability", "Environmental Compliance",
        parent="bc_quality", attrs={"capabilityLevel": "L2"}),
    _fs("bc_certification", "BusinessCapability", "Product Certification",
        parent="bc_quality", attrs={"capabilityLevel": "L2"}),
    _fs("bc_audit", "BusinessCapability", "Audit Management",
        parent="bc_quality", attrs={"capabilityLevel": "L2"}),

    # --- L3 under Mechanical Design ---
    _fs("bc_cad_modeling", "BusinessCapability", "CAD Modeling",
        parent="bc_mech_design", attrs={"capabilityLevel": "L3"}),
    _fs("bc_tolerance", "BusinessCapability", "Tolerance Analysis",
        parent="bc_mech_design", attrs={"capabilityLevel": "L3"}),
    _fs("bc_thermal", "BusinessCapability", "Thermal Management",
        parent="bc_mech_design", attrs={"capabilityLevel": "L3"}),

    # --- L3 under Electronic & PCB Design ---
    _fs("bc_schematic", "BusinessCapability", "Schematic Design",
        parent="bc_elec_design", attrs={"capabilityLevel": "L3"}),
    _fs("bc_pcb_layout", "BusinessCapability", "PCB Layout",
        parent="bc_elec_design", attrs={"capabilityLevel": "L3"}),
    _fs("bc_component_sel", "BusinessCapability", "Component Selection",
        parent="bc_elec_design", attrs={"capabilityLevel": "L3"}),

    # --- L3 under Firmware Development ---
    _fs("bc_rtos", "BusinessCapability", "Real-Time OS Management",
        parent="bc_fw_dev", attrs={"capabilityLevel": "L3"}),
    _fs("bc_comm_protocols", "BusinessCapability", "Communication Protocols",
        parent="bc_fw_dev", attrs={"capabilityLevel": "L3"}),
    _fs("bc_ota", "BusinessCapability", "OTA Update Management",
        parent="bc_fw_dev", attrs={"capabilityLevel": "L3"}),

    # --- L3 under Software Development ---
    _fs("bc_cloud_app_dev", "BusinessCapability", "Cloud Application Development",
        parent="bc_sw_dev", attrs={"capabilityLevel": "L3"}),
    _fs("bc_mobile_dev", "BusinessCapability", "Mobile App Development",
        parent="bc_sw_dev", attrs={"capabilityLevel": "L3"}),
    _fs("bc_api_dev", "BusinessCapability", "API Development",
        parent="bc_sw_dev", attrs={"capabilityLevel": "L3"}),

    # --- L3 under Production Execution ---
    _fs("bc_smt", "BusinessCapability", "SMT Assembly",
        parent="bc_prod_execution", attrs={"capabilityLevel": "L3"}),
    _fs("bc_tht", "BusinessCapability", "Through-Hole Assembly",
        parent="bc_prod_execution", attrs={"capabilityLevel": "L3"}),
    _fs("bc_final_assembly", "BusinessCapability", "Final Assembly",
        parent="bc_prod_execution", attrs={"capabilityLevel": "L3"}),
]


# ── Business Contexts ─────────────────────────────────────────────
BUSINESS_CONTEXTS = [
    # Value Streams
    _fs("bctx_npi", "BusinessContext", "New Product Introduction",
        subtype="valueStream", desc="End-to-end value stream from concept to volume production.",
        attrs={"maturity": "managed"}),
    _fs("bctx_otc", "BusinessContext", "Order to Cash",
        subtype="valueStream", desc="From customer order through delivery and payment.",
        attrs={"maturity": "optimized"}),
    _fs("bctx_i2p", "BusinessContext", "Idea to Product",
        subtype="valueStream", desc="Innovation pipeline from ideation to market-ready product.",
        attrs={"maturity": "defined"}),
    _fs("bctx_ib2s", "BusinessContext", "Installed Base to Service",
        subtype="valueStream", desc="Managing deployed devices through their operational life.",
        attrs={"maturity": "managed"}),
    # Processes
    _fs("bctx_design_review", "BusinessContext", "Design Review Process",
        subtype="process", desc="Formal gate-based design review at each development phase.",
        attrs={"maturity": "optimized"}),
    _fs("bctx_change_mgmt", "BusinessContext", "Engineering Change Management",
        subtype="process", desc="Controlled handling of design and BOM changes.",
        attrs={"maturity": "managed"}),
    _fs("bctx_p2p", "BusinessContext", "Procure to Pay",
        subtype="process", desc="From purchase requisition through invoice payment.",
        attrs={"maturity": "optimized"}),
    _fs("bctx_mfg_exec", "BusinessContext", "Manufacturing Execution Process",
        subtype="process", desc="Shop floor production from work order to finished goods.",
        attrs={"maturity": "managed"}),
    _fs("bctx_complaint", "BusinessContext", "Customer Complaint Handling",
        subtype="process", desc="Structured 8D-based complaint resolution process.",
        attrs={"maturity": "defined"}),
    _fs("bctx_regulatory_sub", "BusinessContext", "Regulatory Submission Process",
        subtype="process", desc="Preparation and submission of CE, UL, and IEC documentation.",
        attrs={"maturity": "managed"}),
    # Customer Journeys
    _fs("bctx_iot_buyer", "BusinessContext", "Industrial IoT Buyer Journey",
        subtype="customerJourney", desc="B2B buying journey for industrial sensor and gateway solutions.",
        attrs={"maturity": "defined"}),
    _fs("bctx_smart_home", "BusinessContext", "Smart Home Customer Journey",
        subtype="customerJourney", desc="Consumer journey for NexaHub and connected home products.",
        attrs={"maturity": "initial"}),
    _fs("bctx_oem_partner", "BusinessContext", "OEM Partner Journey",
        subtype="customerJourney", desc="Partner onboarding and integration for OEM customers.",
        attrs={"maturity": "defined"}),
    # Business Products
    _fs("bctx_smartsense_s100", "BusinessContext", "SmartSense S100 Industrial Sensor",
        subtype="businessProduct",
        desc="Multi-parameter industrial sensor with vibration, temperature and humidity measurement. IP67 rated."),
    _fs("bctx_smartsense_s200", "BusinessContext", "SmartSense S200 Environmental Sensor",
        subtype="businessProduct",
        desc="Environmental monitoring sensor for air quality, CO2, particulate matter. Indoor/outdoor."),
    _fs("bctx_gateway_g500", "BusinessContext", "IoT Gateway G500",
        subtype="businessProduct",
        desc="Edge computing gateway supporting BLE, Zigbee, LoRaWAN and Wi-Fi. ARM Cortex-A72 based."),
    _fs("bctx_actuator_a300", "BusinessContext", "SmartActuator A300",
        subtype="businessProduct",
        desc="Precision electromechanical linear actuator with integrated position feedback and CAN bus."),
    _fs("bctx_nexahub_h100", "BusinessContext", "NexaHub H100 Smart Home Hub",
        subtype="businessProduct",
        desc="Consumer smart home hub with Matter, Thread and Zigbee support."),
]

# ── Applications ──────────────────────────────────────────────────
APPLICATIONS = [
    # --- ERP & Core Business ---
    _fs("app_sap_s4", "Application", "SAP S/4HANA", subtype="businessApplication",
        desc="Central ERP system for finance, procurement, production planning, and order management.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 1200000, "numberOfUsers": 850,
               "vendor": "SAP", "productName": "S/4HANA Cloud"},
        lifecycle={"phaseIn": "2023-01-15", "active": "2024-06-01"}),
    _fs("app_sap_ariba", "Application", "SAP Ariba", subtype="businessApplication",
        desc="Cloud procurement and supplier management platform.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 180000, "numberOfUsers": 120,
               "vendor": "SAP", "productName": "Ariba"},
        lifecycle={"active": "2022-09-01"}),
    _fs("app_sap_sf", "Application", "SAP SuccessFactors", subtype="businessApplication",
        desc="Cloud HCM for talent management, payroll, and workforce analytics.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 220000, "numberOfUsers": 2800,
               "vendor": "SAP", "productName": "SuccessFactors"},
        lifecycle={"active": "2021-03-01"}),

    # --- PLM & Engineering ---
    _fs("app_teamcenter", "Application", "Siemens Teamcenter", subtype="businessApplication",
        desc="Product lifecycle management for BOM, document and change management.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "onPremise", "costTotalAnnual": 450000, "numberOfUsers": 320,
               "vendor": "Siemens", "productName": "Teamcenter"},
        lifecycle={"active": "2018-06-01"}),
    _fs("app_nx", "Application", "Siemens NX", subtype="businessApplication",
        desc="3D CAD/CAM/CAE for mechanical and industrial design.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "onPremise", "costTotalAnnual": 380000, "numberOfUsers": 110,
               "vendor": "Siemens", "productName": "NX"},
        lifecycle={"active": "2017-01-01"}),
    _fs("app_altium", "Application", "Altium Designer", subtype="businessApplication",
        desc="PCB design and schematic capture tool for electronic engineering.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "adequate", "timeModel": "invest",
               "hostingType": "onPremise", "costTotalAnnual": 95000, "numberOfUsers": 45,
               "vendor": "Altium", "productName": "Altium Designer"},
        lifecycle={"active": "2019-01-01"}),
    _fs("app_matlab", "Application", "MATLAB/Simulink", subtype="businessApplication",
        desc="Numerical computing and model-based design for simulation and firmware prototyping.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "onPremise", "costTotalAnnual": 160000, "numberOfUsers": 75,
               "vendor": "MathWorks", "productName": "MATLAB R2025a"},
        lifecycle={"active": "2015-01-01"}),
    _fs("app_bitbucket", "Application", "Bitbucket", subtype="businessApplication",
        desc="Git repository hosting for firmware and software source code.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "migrate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 24000, "numberOfUsers": 350,
               "vendor": "Atlassian", "productName": "Bitbucket Cloud"},
        lifecycle={"active": "2016-01-01", "phaseOut": "2026-12-01"}),
    _fs("app_jenkins", "Application", "Jenkins", subtype="businessApplication",
        desc="CI/CD automation server for build, test and deployment pipelines.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "unreasonable", "timeModel": "migrate",
               "hostingType": "onPremise", "costTotalAnnual": 35000, "numberOfUsers": 200,
               "vendor": "Jenkins Community", "productName": "Jenkins"},
        lifecycle={"active": "2016-01-01", "phaseOut": "2027-06-01"}),
    _fs("app_jira", "Application", "Jira", subtype="businessApplication",
        desc="Issue tracking and agile project management for engineering teams.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 48000, "numberOfUsers": 500,
               "vendor": "Atlassian", "productName": "Jira Cloud"},
        lifecycle={"active": "2017-01-01"}),

    # --- Manufacturing ---
    _fs("app_opcenter", "Application", "Siemens Opcenter", subtype="businessApplication",
        desc="Manufacturing execution system (MES) for production tracking and shop floor control.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "invest",
               "hostingType": "onPremise", "costTotalAnnual": 320000, "numberOfUsers": 250,
               "vendor": "Siemens", "productName": "Opcenter Execution"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_opcenter_aps", "Application", "Siemens Opcenter APS", subtype="businessApplication",
        desc="Advanced planning and scheduling for production optimization.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "tolerate",
               "hostingType": "onPremise", "costTotalAnnual": 110000, "numberOfUsers": 30,
               "vendor": "Siemens", "productName": "Opcenter APS"},
        lifecycle={"active": "2020-06-01"}),
    _fs("app_nexascada", "Application", "NexaSCADA", subtype="businessApplication",
        desc="Custom SCADA system for real-time production line monitoring and control.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "unreasonable", "timeModel": "migrate",
               "hostingType": "onPremise", "costTotalAnnual": 85000, "numberOfUsers": 60,
               "vendor": "NexaTech (internal)", "productName": "NexaSCADA v3"},
        lifecycle={"active": "2014-01-01", "phaseOut": "2027-01-01"}),
    _fs("app_quality_insp", "Application", "Quality Inspection System", subtype="businessApplication",
        desc="Automated optical and electrical test result capture and SPC analysis.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "tolerate",
               "hostingType": "onPremise", "costTotalAnnual": 65000, "numberOfUsers": 80,
               "vendor": "NexaTech (internal)", "productName": "QIS v2"},
        lifecycle={"active": "2019-01-01"}),

    # --- IoT & Data ---
    _fs("app_azure_iot", "Application", "Azure IoT Hub", subtype="businessApplication",
        desc="Cloud IoT device connectivity, message routing and device twin management.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 280000, "numberOfUsers": 15,
               "vendor": "Microsoft", "productName": "Azure IoT Hub"},
        lifecycle={"active": "2021-01-01"}),
    _fs("app_nexacloud", "Application", "NexaCloud IoT Platform", subtype="businessApplication",
        desc="Custom IoT platform for device management, telemetry processing and analytics dashboards.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 420000, "numberOfUsers": 200,
               "vendor": "NexaTech (internal)", "productName": "NexaCloud v4"},
        lifecycle={"phaseIn": "2022-01-01", "active": "2023-06-01"}),
    _fs("app_grafana", "Application", "Grafana", subtype="businessApplication",
        desc="Observability dashboards for IoT telemetry, infrastructure and application metrics.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 36000, "numberOfUsers": 120,
               "vendor": "Grafana Labs", "productName": "Grafana Cloud"},
        lifecycle={"active": "2022-01-01"}),
    _fs("app_kafka", "Application", "Apache Kafka", subtype="businessApplication",
        desc="Distributed event streaming platform for real-time telemetry and integration events.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 96000, "numberOfUsers": 25,
               "vendor": "Confluent", "productName": "Confluent Cloud"},
        lifecycle={"active": "2022-06-01"}),
    _fs("app_timescale", "Application", "TimescaleDB Manager", subtype="businessApplication",
        desc="Time-series database for high-volume IoT telemetry storage and fast aggregation queries.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 48000, "numberOfUsers": 15,
               "vendor": "Timescale", "productName": "Timescale Cloud"},
        lifecycle={"active": "2023-01-01"}),
    _fs("app_powerbi", "Application", "Power BI", subtype="businessApplication",
        desc="Business intelligence and interactive dashboards for finance, sales and operations.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 72000, "numberOfUsers": 300,
               "vendor": "Microsoft", "productName": "Power BI Pro"},
        lifecycle={"active": "2021-01-01"}),

    # --- CRM & Sales ---
    _fs("app_sf_sales", "Application", "Salesforce Sales Cloud", subtype="businessApplication",
        desc="CRM for pipeline management, opportunity tracking and forecasting.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 340000, "numberOfUsers": 180,
               "vendor": "Salesforce", "productName": "Sales Cloud"},
        lifecycle={"phaseIn": "2024-01-01", "active": "2025-01-01"}),
    _fs("app_sf_service", "Application", "Salesforce Service Cloud", subtype="businessApplication",
        desc="Customer support ticketing, case management and knowledge base.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 190000, "numberOfUsers": 95,
               "vendor": "Salesforce", "productName": "Service Cloud"},
        lifecycle={"phaseIn": "2024-06-01", "active": "2025-03-01"}),
    _fs("app_sf_cpq", "Application", "Salesforce CPQ", subtype="businessApplication",
        desc="Configure-price-quote for complex sensor and gateway product bundles.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 85000, "numberOfUsers": 60,
               "vendor": "Salesforce", "productName": "Revenue Cloud CPQ"},
        lifecycle={"phaseIn": "2025-01-01", "active": "2025-09-01"}),
    _fs("app_hubspot", "Application", "HubSpot Marketing", subtype="businessApplication",
        desc="Marketing automation, email campaigns, landing pages and lead scoring.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 54000, "numberOfUsers": 40,
               "vendor": "HubSpot", "productName": "Marketing Hub"},
        lifecycle={"active": "2020-01-01"}),

    # --- Operations & IT ---
    _fs("app_servicenow", "Application", "ServiceNow", subtype="businessApplication",
        desc="IT service management, incident and change management.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 260000, "numberOfUsers": 400,
               "vendor": "ServiceNow", "productName": "ITSM Pro"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_m365", "Application", "Microsoft 365", subtype="businessApplication",
        desc="Productivity suite: Outlook, Word, Excel, PowerPoint for all employees.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 504000, "numberOfUsers": 2800,
               "vendor": "Microsoft", "productName": "Microsoft 365 E5"},
        lifecycle={"active": "2019-01-01"}),
    _fs("app_teams", "Application", "Microsoft Teams", subtype="businessApplication",
        desc="Collaboration, chat, video conferencing and team channels.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 0, "numberOfUsers": 2800,
               "vendor": "Microsoft", "productName": "Microsoft Teams"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_sharepoint", "Application", "SharePoint Online", subtype="businessApplication",
        desc="Document management, intranet and team sites.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 0, "numberOfUsers": 2200,
               "vendor": "Microsoft", "productName": "SharePoint Online"},
        lifecycle={"active": "2019-01-01"}),
    _fs("app_azure_ad", "Application", "Microsoft Entra ID", subtype="businessApplication",
        desc="Identity and access management, SSO and conditional access policies.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 120000, "numberOfUsers": 2800,
               "vendor": "Microsoft", "productName": "Entra ID P2"},
        lifecycle={"active": "2019-01-01"}),
    _fs("app_okta", "Application", "Okta", subtype="businessApplication",
        desc="Workforce and customer identity platform with MFA and adaptive access.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 96000, "numberOfUsers": 2800,
               "vendor": "Okta", "productName": "Workforce Identity Cloud"},
        lifecycle={"active": "2022-01-01"}),

    # --- Customer-Facing ---
    _fs("app_nexaportal", "Application", "NexaPortal", subtype="businessApplication",
        desc="Customer self-service portal for device registration, firmware updates and support tickets.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 180000, "numberOfUsers": 5000,
               "vendor": "NexaTech (internal)", "productName": "NexaPortal v3"},
        lifecycle={"active": "2021-01-01"}),
    _fs("app_nexamobile", "Application", "NexaMobile App", subtype="businessApplication",
        desc="iOS/Android app for device setup, live telemetry and push notifications.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 120000, "numberOfUsers": 12000,
               "vendor": "NexaTech (internal)", "productName": "NexaMobile v2"},
        lifecycle={"active": "2022-06-01"}),
    _fs("app_nexaconnect", "Application", "NexaConnect Device Manager", subtype="businessApplication",
        desc="Fleet management for deployed IoT devices: provisioning, OTA updates, health monitoring.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 150000, "numberOfUsers": 50,
               "vendor": "NexaTech (internal)", "productName": "NexaConnect v2"},
        lifecycle={"active": "2023-01-01"}),

    # --- Other ---
    _fs("app_confluence", "Application", "Confluence", subtype="businessApplication",
        desc="Wiki and documentation platform for engineering and project knowledge.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 36000, "numberOfUsers": 500,
               "vendor": "Atlassian", "productName": "Confluence Cloud"},
        lifecycle={"active": "2017-01-01"}),
    _fs("app_docusign", "Application", "DocuSign", subtype="businessApplication",
        desc="Electronic signature and contract lifecycle management.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 28000, "numberOfUsers": 80,
               "vendor": "DocuSign", "productName": "DocuSign eSignature"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_coupa", "Application", "Coupa", subtype="businessApplication",
        desc="Expense management and procurement analytics platform.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 45000, "numberOfUsers": 600,
               "vendor": "Coupa", "productName": "Coupa BSM"},
        lifecycle={"active": "2021-01-01"}),
    _fs("app_adaptive", "Application", "Workday Adaptive Planning", subtype="businessApplication",
        desc="Financial planning, budgeting and forecasting platform.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 68000, "numberOfUsers": 40,
               "vendor": "Workday", "productName": "Adaptive Planning"},
        lifecycle={"active": "2022-01-01"}),
    _fs("app_tableau", "Application", "Tableau", subtype="businessApplication",
        desc="Data visualization and analytics for sales and marketing teams.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "migrate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 52000, "numberOfUsers": 80,
               "vendor": "Salesforce", "productName": "Tableau Cloud"},
        lifecycle={"active": "2019-01-01", "phaseOut": "2027-01-01"}),
    _fs("app_snowflake", "Application", "Snowflake", subtype="businessApplication",
        desc="Cloud data warehouse for enterprise analytics and cross-domain data sharing.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 240000, "numberOfUsers": 60,
               "vendor": "Snowflake", "productName": "Snowflake Enterprise"},
        lifecycle={"active": "2023-06-01"}),
    _fs("app_github_actions", "Application", "GitHub Actions", subtype="businessApplication",
        desc="CI/CD workflows hosted on GitHub for automated builds, tests and deployments.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 42000, "numberOfUsers": 350,
               "vendor": "GitHub", "productName": "GitHub Enterprise"},
        lifecycle={"phaseIn": "2025-01-01", "active": "2025-06-01"}),
    _fs("app_sonarqube", "Application", "SonarQube", subtype="businessApplication",
        desc="Static code analysis for code quality and security vulnerability scanning.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "tolerate",
               "hostingType": "onPremise", "costTotalAnnual": 18000, "numberOfUsers": 200,
               "vendor": "SonarSource", "productName": "SonarQube Developer"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_vault", "Application", "HashiCorp Vault", subtype="businessApplication",
        desc="Secrets management, encryption-as-a-service and PKI.",
        attrs={"businessCriticality": "missionCritical", "functionalSuitability": "perfect",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudSaaS", "costTotalAnnual": 72000, "numberOfUsers": 50,
               "vendor": "HashiCorp", "productName": "HCP Vault"},
        lifecycle={"active": "2023-01-01"}),
    _fs("app_splunk", "Application", "Splunk", subtype="businessApplication",
        desc="SIEM and log analytics for security monitoring and operational intelligence.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "adequate", "timeModel": "tolerate",
               "hostingType": "cloudSaaS", "costTotalAnnual": 180000, "numberOfUsers": 60,
               "vendor": "Splunk", "productName": "Splunk Enterprise Cloud"},
        lifecycle={"active": "2020-01-01"}),
    _fs("app_ptc_windchill", "Application", "PTC Windchill", subtype="businessApplication",
        desc="Legacy PLM system being phased out in favor of Teamcenter.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "insufficient",
               "technicalSuitability": "inappropriate", "timeModel": "eliminate",
               "hostingType": "onPremise", "costTotalAnnual": 150000, "numberOfUsers": 40,
               "vendor": "PTC", "productName": "Windchill 12"},
        lifecycle={"active": "2012-01-01", "phaseOut": "2026-06-01", "endOfLife": "2027-01-01"}),
    _fs("app_anomaly_ai", "Application", "Anomaly Detection Service", subtype="aiAgent",
        desc="ML service that detects anomalous patterns in real-time IoT telemetry streams.",
        attrs={"businessCriticality": "businessCritical", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 96000, "numberOfUsers": 10,
               "vendor": "NexaTech (internal)", "productName": "NexaAnomaly v1"},
        lifecycle={"phaseIn": "2025-01-01", "active": "2025-09-01"}),
    _fs("app_pred_maint", "Application", "Predictive Maintenance Service", subtype="aiAgent",
        desc="ML models predicting device failure probability and optimal maintenance windows.",
        attrs={"businessCriticality": "businessOperational", "functionalSuitability": "appropriate",
               "technicalSuitability": "fullyAppropriate", "timeModel": "invest",
               "hostingType": "cloudPaaS", "costTotalAnnual": 84000, "numberOfUsers": 10,
               "vendor": "NexaTech (internal)", "productName": "NexaPredict v1"},
        lifecycle={"phaseIn": "2025-06-01", "active": "2026-01-01"}),
]
# ── IT Components ─────────────────────────────────────────────────
IT_COMPONENTS = [
    # Software
    _fs("itc_postgres", "ITComponent", "PostgreSQL 16", subtype="software",
        desc="Primary open-source relational database for IoT platform and internal apps.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "PostgreSQL Global Dev Group", "version": "16.4",
               "costTotalAnnual": 0, "licenseType": "PostgreSQL License"}),
    _fs("itc_redis", "ITComponent", "Redis 7", subtype="software",
        desc="In-memory data store for caching, session management and pub/sub.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Redis Ltd", "version": "7.2",
               "costTotalAnnual": 18000, "licenseType": "SSPL / Redis Cloud"}),
    _fs("itc_nginx", "ITComponent", "Nginx", subtype="software",
        desc="Reverse proxy and API gateway for NexaCloud microservices.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "F5 Networks", "version": "1.25",
               "costTotalAnnual": 0, "licenseType": "BSD-2-Clause"}),
    _fs("itc_nodejs", "ITComponent", "Node.js 20 LTS", subtype="software",
        desc="JavaScript runtime for NexaCloud backend services.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "OpenJS Foundation", "version": "20.11",
               "costTotalAnnual": 0, "licenseType": "MIT"}),
    _fs("itc_python", "ITComponent", "Python 3.12", subtype="software",
        desc="Language runtime for data science, ML pipelines and automation scripts.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Python Software Foundation", "version": "3.12",
               "costTotalAnnual": 0, "licenseType": "PSF License"}),
    _fs("itc_dotnet", "ITComponent", ".NET 8", subtype="software",
        desc="Runtime for Opcenter integrations and legacy internal tools.",
        attrs={"technicalSuitability": "adequate", "resourceClassification": "tolerated",
               "vendor": "Microsoft", "version": "8.0",
               "costTotalAnnual": 0, "licenseType": "MIT"}),
    _fs("itc_react", "ITComponent", "React 18", subtype="software",
        desc="Frontend UI framework for NexaPortal, NexaConnect dashboards.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Meta", "version": "18.3",
               "costTotalAnnual": 0, "licenseType": "MIT"}),
    # SaaS
    _fs("itc_datadog", "ITComponent", "Datadog", subtype="saas",
        desc="Cloud monitoring, APM and log management.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Datadog", "version": "SaaS",
               "costTotalAnnual": 132000, "licenseType": "Subscription"}),
    _fs("itc_pagerduty", "ITComponent", "PagerDuty", subtype="saas",
        desc="Incident response and on-call management.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "PagerDuty", "version": "SaaS",
               "costTotalAnnual": 24000, "licenseType": "Subscription"}),
    _fs("itc_github", "ITComponent", "GitHub Enterprise", subtype="saas",
        desc="Source code hosting, code review and CI/CD (replacing Bitbucket).",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "phaseIn",
               "vendor": "GitHub", "version": "Enterprise Cloud",
               "costTotalAnnual": 63000, "licenseType": "Subscription"}),
    # Hardware
    _fs("itc_dell_r760", "ITComponent", "Dell PowerEdge R760", subtype="hardware",
        desc="Production rack servers for on-premise MES and SCADA workloads.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Dell Technologies", "version": "Gen 16",
               "costTotalAnnual": 45000, "licenseType": "Capital Lease"}),
    _fs("itc_hpe_dl380", "ITComponent", "HPE ProLiant DL380", subtype="hardware",
        desc="Development and staging servers in Munich data center.",
        attrs={"technicalSuitability": "adequate", "resourceClassification": "tolerated",
               "vendor": "HPE", "version": "Gen 10 Plus",
               "costTotalAnnual": 28000, "licenseType": "Owned"}),
    _fs("itc_cisco_9300", "ITComponent", "Cisco Catalyst 9300", subtype="hardware",
        desc="Core network switches for factory floor and office LAN.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Cisco", "version": "9300-48P",
               "costTotalAnnual": 22000, "licenseType": "DNA Subscription"}),
    _fs("itc_fortinet", "ITComponent", "Fortinet FortiGate 600F", subtype="hardware",
        desc="Next-gen firewall for perimeter and factory network segmentation.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Fortinet", "version": "FortiOS 7.4",
               "costTotalAnnual": 36000, "licenseType": "FortiGuard Subscription"}),
    _fs("itc_netapp", "ITComponent", "NetApp AFF A400", subtype="hardware",
        desc="All-flash storage array for on-premise database and PLM file vaults.",
        attrs={"technicalSuitability": "adequate", "resourceClassification": "standard",
               "vendor": "NetApp", "version": "ONTAP 9.14",
               "costTotalAnnual": 52000, "licenseType": "Capital + Support"}),
    # PaaS
    _fs("itc_aks", "ITComponent", "Azure Kubernetes Service", subtype="paas",
        desc="Managed Kubernetes for NexaCloud microservices and IoT backend.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Microsoft", "version": "1.29",
               "costTotalAnnual": 156000, "licenseType": "Pay-as-you-go"}),
    _fs("itc_azure_sql", "ITComponent", "Azure SQL Database", subtype="paas",
        desc="Managed relational database for SAP S/4HANA RISE and auxiliary services.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Microsoft", "version": "Latest",
               "costTotalAnnual": 84000, "licenseType": "Pay-as-you-go"}),
    _fs("itc_azure_eh", "ITComponent", "Azure Event Hubs", subtype="paas",
        desc="Managed event streaming (Kafka-compatible) for high-throughput IoT telemetry.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Microsoft", "version": "Premium",
               "costTotalAnnual": 48000, "licenseType": "Pay-as-you-go"}),
    _fs("itc_azure_devops", "ITComponent", "Azure DevOps", subtype="paas",
        desc="CI/CD pipelines, artifact feeds and test plans (transitioning to GitHub Actions).",
        attrs={"technicalSuitability": "adequate", "resourceClassification": "tolerated",
               "vendor": "Microsoft", "version": "Services",
               "costTotalAnnual": 18000, "licenseType": "Subscription"}),
    # IaaS
    _fs("itc_azure_vm", "ITComponent", "Azure Virtual Machines", subtype="iaas",
        desc="IaaS compute for Splunk, legacy workloads and burst capacity.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Microsoft", "version": "Dv5 / Ev5 series",
               "costTotalAnnual": 96000, "licenseType": "Pay-as-you-go"}),
    _fs("itc_aws_ec2", "ITComponent", "AWS EC2", subtype="iaas",
        desc="Secondary cloud compute for Americas region disaster recovery.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Amazon Web Services", "version": "m6i / c6i",
               "costTotalAnnual": 36000, "licenseType": "Reserved Instances"}),
    # AI Models
    _fs("itc_anomaly_model", "ITComponent", "Anomaly Detection Model v2", subtype="aiModel",
        desc="Isolation Forest + autoencoder ensemble trained on 18 months of sensor telemetry.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "phaseIn",
               "vendor": "NexaTech (internal)", "version": "2.1",
               "costTotalAnnual": 0, "licenseType": "Internal"}),
    _fs("itc_pred_model", "ITComponent", "Predictive Maintenance Model v1", subtype="aiModel",
        desc="Gradient-boosted survival model predicting remaining useful life of actuators.",
        attrs={"technicalSuitability": "adequate", "resourceClassification": "phaseIn",
               "vendor": "NexaTech (internal)", "version": "1.3",
               "costTotalAnnual": 0, "licenseType": "Internal"}),
    # Service
    _fs("itc_azure_monitor", "ITComponent", "Azure Monitor", subtype="service",
        desc="Cloud-native monitoring, alerting and diagnostics for Azure resources.",
        attrs={"technicalSuitability": "fullyAppropriate", "resourceClassification": "standard",
               "vendor": "Microsoft", "version": "SaaS",
               "costTotalAnnual": 42000, "licenseType": "Pay-as-you-go"}),
]
# ── Interfaces ────────────────────────────────────────────────────
INTERFACES = [
    _fs("if_sap_tc_bom", "Interface", "SAP ↔ Teamcenter BOM Sync",
        subtype="logicalInterface", desc="Bi-directional BOM synchronization between ERP and PLM.",
        attrs={"frequency": "realTime", "dataFormat": "IDOC/XML", "protocol": "RFC/HTTP"}),
    _fs("if_sap_mes", "Interface", "SAP → Opcenter Production Orders",
        subtype="logicalInterface", desc="Production order release from ERP to MES.",
        attrs={"frequency": "realTime", "dataFormat": "XML", "protocol": "OPC-UA / REST"}),
    _fs("if_iot_kafka", "Interface", "Azure IoT Hub → Kafka Telemetry",
        subtype="logicalInterface", desc="Real-time device telemetry routed into Kafka topics.",
        attrs={"frequency": "realTime", "dataFormat": "JSON / Avro", "protocol": "AMQP → Kafka"}),
    _fs("if_kafka_ts", "Interface", "Kafka → TimescaleDB Ingestion",
        subtype="logicalInterface", desc="Consumer pipeline writing telemetry into time-series store.",
        attrs={"frequency": "realTime", "dataFormat": "Avro", "protocol": "Kafka Connect JDBC"}),
    _fs("if_sf_sap_order", "Interface", "Salesforce → SAP Order Sync",
        subtype="api", desc="Closed-won opportunities create sales orders in ERP.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "REST"}),
    _fs("if_portal_iot", "Interface", "NexaPortal → IoT Platform API",
        subtype="api", desc="Customer portal retrieves device status and telemetry from NexaCloud.",
        attrs={"frequency": "onDemand", "dataFormat": "JSON", "protocol": "REST / GraphQL"}),
    _fs("if_mobile_iot", "Interface", "NexaMobile → IoT Platform API",
        subtype="api", desc="Mobile app accesses device control and telemetry endpoints.",
        attrs={"frequency": "onDemand", "dataFormat": "JSON", "protocol": "REST"}),
    _fs("if_sap_pbi", "Interface", "SAP → Power BI Financial Data",
        subtype="logicalInterface", desc="Nightly extract of financial actuals and budget data.",
        attrs={"frequency": "daily", "dataFormat": "OData / JSON", "protocol": "OData v4"}),
    _fs("if_ad_okta", "Interface", "Entra ID → Okta User Sync",
        subtype="logicalInterface", desc="SCIM-based user provisioning from Entra ID to Okta.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "SCIM 2.0"}),
    _fs("if_mes_quality", "Interface", "Opcenter → Quality Inspection System",
        subtype="logicalInterface", desc="Test results and SPC data pushed from MES to QIS.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "REST"}),
    _fs("if_plm_erp_bom", "Interface", "Teamcenter → SAP Engineering BOM",
        subtype="logicalInterface", desc="Released engineering BOMs transferred to manufacturing BOM in ERP.",
        attrs={"frequency": "onDemand", "dataFormat": "IDOC/XML", "protocol": "RFC"}),
    _fs("if_iot_grafana", "Interface", "NexaCloud → Grafana Metrics",
        subtype="api", desc="Prometheus-format metrics endpoint scraped by Grafana.",
        attrs={"frequency": "realTime", "dataFormat": "Prometheus", "protocol": "HTTP Pull"}),
    _fs("if_sn_teams", "Interface", "ServiceNow → Teams Notifications",
        subtype="api", desc="Incident and change notifications posted to Teams channels.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "Webhook"}),
    _fs("if_all_splunk", "Interface", "Applications → Splunk Log Collection",
        subtype="logicalInterface", desc="Centralized log forwarding from all applications to Splunk.",
        attrs={"frequency": "realTime", "dataFormat": "Syslog / JSON", "protocol": "HEC / Syslog"}),
    _fs("if_gh_sonar", "Interface", "GitHub Actions → SonarQube Scan",
        subtype="api", desc="CI pipeline triggers static analysis on every pull request.",
        attrs={"frequency": "onDemand", "dataFormat": "JSON", "protocol": "REST"}),
    _fs("if_iot_anomaly", "Interface", "IoT Platform → Anomaly Detection API",
        subtype="api", desc="Streaming inference endpoint for real-time anomaly scoring.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "gRPC / REST"}),
    _fs("if_sap_snow", "Interface", "SAP → Snowflake Data Feed",
        subtype="logicalInterface", desc="Nightly CDC feed of ERP transactional data to data warehouse.",
        attrs={"frequency": "daily", "dataFormat": "Parquet", "protocol": "Snowpipe / S3"}),
    _fs("if_hub_sf", "Interface", "HubSpot → Salesforce Lead Sync",
        subtype="api", desc="Marketing-qualified leads pushed from HubSpot to Salesforce.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "REST"}),
    _fs("if_docu_sf", "Interface", "DocuSign ↔ Salesforce Contract Sync",
        subtype="api", desc="Contract status and signed documents synced bidirectionally.",
        attrs={"frequency": "realTime", "dataFormat": "JSON", "protocol": "REST / Webhook"}),
    _fs("if_coupa_sap", "Interface", "Coupa → SAP Expense Sync",
        subtype="logicalInterface", desc="Approved expense reports and invoices posted to ERP.",
        attrs={"frequency": "daily", "dataFormat": "XML", "protocol": "cXML / REST"}),
]
# ── Data Objects ──────────────────────────────────────────────────
DATA_OBJECTS = [
    _fs("do_product", "DataObject", "Product Master Data",
        desc="Core product attributes: part number, revision, description, classification.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Engineering Division", "isPersonalData": False}),
    _fs("do_bom", "DataObject", "Bill of Materials",
        desc="Multi-level BOM including engineering, manufacturing and service views.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "Engineering Division", "isPersonalData": False}),
    _fs("do_customer", "DataObject", "Customer Data",
        desc="B2B and B2C customer records: company, contacts, addresses, payment terms.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "Sales & Marketing", "isPersonalData": True}),
    _fs("do_sales_order", "DataObject", "Sales Order",
        desc="Customer purchase orders, line items, pricing, delivery schedules.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "Sales & Marketing", "isPersonalData": False}),
    _fs("do_purchase_order", "DataObject", "Purchase Order",
        desc="Procurement orders to suppliers for raw materials and components.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Supply Chain & Logistics", "isPersonalData": False}),
    _fs("do_prod_order", "DataObject", "Production Order",
        desc="Manufacturing work orders with routing, material list and scheduling data.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Manufacturing Division", "isPersonalData": False}),
    _fs("do_telemetry", "DataObject", "Device Telemetry Data",
        desc="Time-series sensor readings: temperature, humidity, vibration, voltage, etc.",
        attrs={"dataSensitivity": "internal", "dataOwner": "R&D", "isPersonalData": False}),
    _fs("do_firmware", "DataObject", "Firmware Binary",
        desc="Compiled firmware images, signing keys and release metadata.",
        attrs={"dataSensitivity": "restricted", "dataOwner": "Firmware & Embedded", "isPersonalData": False}),
    _fs("do_test_results", "DataObject", "Test Results",
        desc="Electrical, functional and environmental test data per production unit.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Quality Engineering", "isPersonalData": False}),
    _fs("do_quality_report", "DataObject", "Quality Report",
        desc="8D reports, CAPA records and audit findings.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "Quality Engineering", "isPersonalData": False}),
    _fs("do_employee", "DataObject", "Employee Data",
        desc="HR records: personal info, contracts, compensation, performance reviews.",
        attrs={"dataSensitivity": "restricted", "dataOwner": "Human Resources", "isPersonalData": True}),
    _fs("do_financial_tx", "DataObject", "Financial Transaction",
        desc="General ledger entries, AP/AR postings, cost center allocations.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "Finance & Controlling", "isPersonalData": False}),
    _fs("do_inventory", "DataObject", "Inventory Record",
        desc="Stock levels, warehouse locations, batch/serial tracking.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Supply Chain & Logistics", "isPersonalData": False}),
    _fs("do_device_registry", "DataObject", "IoT Device Registry",
        desc="Provisioned device identities, certificates, firmware versions, health status.",
        attrs={"dataSensitivity": "confidential", "dataOwner": "R&D", "isPersonalData": False}),
    _fs("do_maint_record", "DataObject", "Maintenance Record",
        desc="Service history, predictive maintenance alerts and field replacement logs.",
        attrs={"dataSensitivity": "internal", "dataOwner": "Customer Support", "isPersonalData": False}),
]
# ── Tech Categories ───────────────────────────────────────────────
TECH_CATEGORIES = [
    # L1
    _fs("tc_databases", "TechCategory", "Databases & Storage"),
    _fs("tc_middleware", "TechCategory", "Middleware & Integration"),
    _fs("tc_cloud", "TechCategory", "Cloud Infrastructure"),
    _fs("tc_security", "TechCategory", "Security"),
    _fs("tc_devtools", "TechCategory", "Development Tools"),
    # L2 under Databases
    _fs("tc_rdbms", "TechCategory", "Relational Databases", parent="tc_databases"),
    _fs("tc_tsdb", "TechCategory", "Time-Series Databases", parent="tc_databases"),
    _fs("tc_obj_store", "TechCategory", "Object Storage", parent="tc_databases"),
    # L2 under Middleware
    _fs("tc_msg_broker", "TechCategory", "Message Brokers", parent="tc_middleware"),
    _fs("tc_api_gw", "TechCategory", "API Gateways", parent="tc_middleware"),
    # L2 under Cloud
    _fs("tc_container_orch", "TechCategory", "Container Orchestration", parent="tc_cloud"),
    _fs("tc_compute", "TechCategory", "Compute", parent="tc_cloud"),
    # L2 under Security
    _fs("tc_iam", "TechCategory", "Identity & Access Management", parent="tc_security"),
    _fs("tc_netsec", "TechCategory", "Network Security", parent="tc_security"),
    # L2 under Dev Tools
    _fs("tc_cicd", "TechCategory", "CI/CD Pipelines", parent="tc_devtools"),
    _fs("tc_code_quality", "TechCategory", "Code Quality", parent="tc_devtools"),
]


# ── Providers ─────────────────────────────────────────────────────
PROVIDERS = [
    _fs("prov_microsoft", "Provider", "Microsoft",
        desc="Strategic cloud and productivity partner (Azure, M365, Entra ID).",
        attrs={"providerType": "vendor", "website": "https://microsoft.com", "contractEnd": "2028-12-31"}),
    _fs("prov_sap", "Provider", "SAP",
        desc="ERP, procurement and HCM vendor (S/4HANA, Ariba, SuccessFactors).",
        attrs={"providerType": "vendor", "website": "https://sap.com", "contractEnd": "2029-06-30"}),
    _fs("prov_siemens", "Provider", "Siemens Digital Industries",
        desc="PLM, CAD and MES vendor (Teamcenter, NX, Opcenter).",
        attrs={"providerType": "vendor", "website": "https://siemens.com", "contractEnd": "2028-03-31"}),
    _fs("prov_salesforce", "Provider", "Salesforce",
        desc="CRM and marketing platform vendor.",
        attrs={"providerType": "vendor", "website": "https://salesforce.com", "contractEnd": "2028-01-01"}),
    _fs("prov_altium", "Provider", "Altium",
        desc="PCB design software vendor.",
        attrs={"providerType": "vendor", "website": "https://altium.com", "contractEnd": "2027-01-01"}),
    _fs("prov_mathworks", "Provider", "MathWorks",
        desc="MATLAB and Simulink vendor for simulation and model-based design.",
        attrs={"providerType": "vendor", "website": "https://mathworks.com", "contractEnd": "2027-06-30"}),
    _fs("prov_atlassian", "Provider", "Atlassian",
        desc="Jira, Confluence and Bitbucket vendor (transitioning to GitHub).",
        attrs={"providerType": "vendor", "website": "https://atlassian.com", "contractEnd": "2027-03-31"}),
    _fs("prov_servicenow", "Provider", "ServiceNow",
        desc="ITSM platform vendor.",
        attrs={"providerType": "vendor", "website": "https://servicenow.com", "contractEnd": "2027-12-31"}),
    _fs("prov_snowflake", "Provider", "Snowflake",
        desc="Cloud data warehouse vendor.",
        attrs={"providerType": "vendor", "website": "https://snowflake.com", "contractEnd": "2028-06-30"}),
    _fs("prov_hashicorp", "Provider", "HashiCorp",
        desc="Secrets management and infrastructure-as-code vendor.",
        attrs={"providerType": "vendor", "website": "https://hashicorp.com", "contractEnd": "2027-12-31"}),
    _fs("prov_datadog", "Provider", "Datadog",
        desc="Cloud monitoring and APM vendor.",
        attrs={"providerType": "vendor", "website": "https://datadoghq.com", "contractEnd": "2027-06-30"}),
    _fs("prov_fortinet", "Provider", "Fortinet",
        desc="Network security and firewall vendor.",
        attrs={"providerType": "vendor", "website": "https://fortinet.com", "contractEnd": "2028-03-31"}),
    _fs("prov_dell", "Provider", "Dell Technologies",
        desc="Server hardware and storage vendor.",
        attrs={"providerType": "vendor", "website": "https://dell.com", "contractEnd": "2027-12-31"}),
    _fs("prov_cisco", "Provider", "Cisco",
        desc="Network infrastructure vendor.",
        attrs={"providerType": "vendor", "website": "https://cisco.com", "contractEnd": "2028-06-30"}),
    _fs("prov_aws", "Provider", "Amazon Web Services",
        desc="Secondary cloud provider for DR and Americas workloads.",
        attrs={"providerType": "vendor", "website": "https://aws.amazon.com", "contractEnd": "2027-12-31"}),
]


# ── Objectives ────────────────────────────────────────────────────
OBJECTIVES = [
    _fs("obj_digital_tx", "Objective", "Accelerate Digital Transformation",
        desc="Digitize core business processes and enable data-driven operations across all divisions.",
        attrs={"objectiveType": "strategic", "targetDate": "2028-12-31", "progress": 35}),
    _fs("obj_ttm", "Objective", "Reduce Time-to-Market by 30%",
        desc="Shorten NPI cycle from 18 months to 12 months through DevOps, simulation and PLM improvements.",
        attrs={"objectiveType": "strategic", "targetDate": "2027-06-30", "progress": 20}),
    _fs("obj_industry40", "Objective", "Achieve Industry 4.0 Manufacturing",
        desc="Fully connected, data-driven manufacturing with digital twins and real-time quality control.",
        attrs={"objectiveType": "strategic", "targetDate": "2028-06-30", "progress": 30}),
    _fs("obj_cx", "Objective", "Improve Customer Experience (NPS > 70)",
        desc="Unified customer portal, proactive service and seamless onboarding for all product lines.",
        attrs={"objectiveType": "tactical", "targetDate": "2027-12-31", "progress": 40}),
    _fs("obj_cybersec", "Objective", "Strengthen Cybersecurity Posture",
        desc="Zero-trust architecture, SOC 2 Type II certification and IEC 62443 compliance.",
        attrs={"objectiveType": "strategic", "targetDate": "2027-06-30", "progress": 45}),
    _fs("obj_it_cost", "Objective", "Optimize IT Costs (15% Reduction)",
        desc="Rationalize application portfolio, consolidate vendors and increase cloud efficiency.",
        attrs={"objectiveType": "tactical", "targetDate": "2027-12-31", "progress": 25}),
    _fs("obj_data_driven", "Objective", "Enable Data-Driven Decision Making",
        desc="Enterprise data warehouse, self-service BI and AI/ML capabilities across the organization.",
        attrs={"objectiveType": "strategic", "targetDate": "2028-06-30", "progress": 30}),
    _fs("obj_iot_portfolio", "Objective", "Expand IoT Product Portfolio",
        desc="Launch 3 new IoT product families and grow connected device base to 500K units.",
        attrs={"objectiveType": "strategic", "targetDate": "2028-12-31", "progress": 20}),
]


# ── Initiatives ───────────────────────────────────────────────────
INITIATIVES = [
    # Programs
    _fs("init_digital_program", "Initiative", "Digital Transformation Program",
        subtype="program",
        desc="Umbrella program coordinating all digital initiatives across the enterprise.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "high",
               "costBudget": 8000000, "costActual": 2800000,
               "startDate": "2024-01-01", "endDate": "2028-12-31"},
        lifecycle={"active": "2024-01-01"}),
    _fs("init_mfg_excellence", "Initiative", "Manufacturing Excellence Program",
        subtype="program",
        desc="Industry 4.0 program: digital twin, predictive quality and OEE optimization.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "high",
               "costBudget": 4500000, "costActual": 1200000,
               "startDate": "2024-06-01", "endDate": "2028-06-30"},
        lifecycle={"active": "2024-06-01"}),
    # Projects
    _fs("init_sap_migration", "Initiative", "SAP S/4HANA Migration",
        subtype="project", parent="init_digital_program",
        desc="Migrate from legacy ECC to S/4HANA Cloud (RISE with SAP).",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "high",
               "costBudget": 2500000, "costActual": 1800000,
               "startDate": "2023-01-15", "endDate": "2026-06-30"},
        lifecycle={"active": "2023-01-15"}),
    _fs("init_iot_modern", "Initiative", "IoT Platform Modernization",
        subtype="project", parent="init_digital_program",
        desc="Rebuild NexaCloud on event-driven microservices with AKS and Kafka.",
        attrs={"initiativeStatus": "atRisk", "businessValue": "high", "effort": "high",
               "costBudget": 1800000, "costActual": 950000,
               "startDate": "2024-03-01", "endDate": "2026-12-31"},
        lifecycle={"active": "2024-03-01"}),
    _fs("init_sf_impl", "Initiative", "Salesforce CRM Implementation",
        subtype="project", parent="init_digital_program",
        desc="Deploy Sales Cloud, Service Cloud and CPQ to replace legacy CRM.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "medium",
               "costBudget": 900000, "costActual": 450000,
               "startDate": "2024-01-01", "endDate": "2026-03-31"},
        lifecycle={"active": "2024-01-01"}),
    _fs("init_cybersec_enhance", "Initiative", "Cybersecurity Enhancement",
        subtype="project",
        desc="Implement SIEM improvements, MFA everywhere and vulnerability management.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "medium",
               "costBudget": 650000, "costActual": 320000,
               "startDate": "2024-06-01", "endDate": "2026-06-30"},
        lifecycle={"active": "2024-06-01"}),
    _fs("init_dw_consolidation", "Initiative", "Data Warehouse Consolidation",
        subtype="project", parent="init_digital_program",
        desc="Consolidate data silos into Snowflake enterprise data warehouse.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "medium", "effort": "medium",
               "costBudget": 500000, "costActual": 180000,
               "startDate": "2025-01-01", "endDate": "2026-12-31"},
        lifecycle={"active": "2025-01-01"}),
    _fs("init_plm_retire", "Initiative", "Legacy PLM Retirement",
        subtype="project",
        desc="Complete data migration from PTC Windchill to Siemens Teamcenter and decommission.",
        attrs={"initiativeStatus": "atRisk", "businessValue": "medium", "effort": "medium",
               "costBudget": 400000, "costActual": 280000,
               "startDate": "2024-01-01", "endDate": "2027-01-31"},
        lifecycle={"active": "2024-01-01"}),
    _fs("init_devops", "Initiative", "DevOps Pipeline Modernization",
        subtype="project",
        desc="Migrate from Jenkins/Bitbucket to GitHub Actions with GitOps and IaC.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "medium", "effort": "low",
               "costBudget": 250000, "costActual": 80000,
               "startDate": "2025-01-01", "endDate": "2026-06-30"},
        lifecycle={"active": "2025-01-01"}),
    _fs("init_ai_pred_maint", "Initiative", "AI/ML for Predictive Maintenance",
        subtype="project", parent="init_mfg_excellence",
        desc="Train and deploy ML models for remaining useful life prediction on actuators and sensors.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "high", "effort": "medium",
               "costBudget": 600000, "costActual": 200000,
               "startDate": "2025-01-01", "endDate": "2026-12-31"},
        lifecycle={"active": "2025-01-01"}),
    _fs("init_portal_redesign", "Initiative", "Customer Portal Redesign",
        subtype="project", parent="init_digital_program",
        desc="Rebuild NexaPortal with modern UX, self-service device management and analytics.",
        attrs={"initiativeStatus": "onTrack", "businessValue": "medium", "effort": "medium",
               "costBudget": 350000, "costActual": 50000,
               "startDate": "2025-06-01", "endDate": "2026-09-30"},
        lifecycle={"phaseIn": "2025-06-01"}),
    _fs("init_zero_trust", "Initiative", "Zero Trust Network Implementation",
        subtype="project",
        desc="Implement micro-segmentation, device trust and identity-aware proxies.",
        attrs={"initiativeStatus": "onHold", "businessValue": "high", "effort": "high",
               "costBudget": 800000, "costActual": 50000,
               "startDate": "2025-09-01", "endDate": "2027-06-30"},
        lifecycle={"plan": "2025-06-01"}),
]


# ── Platforms ─────────────────────────────────────────────────────
PLATFORMS = [
    _fs("plat_iot", "Platform", "Digital IoT Platform",
        subtype="digital",
        desc="End-to-end IoT platform: device connectivity, data ingestion, analytics and device management.",
        attrs={"platformType": "digital"},
        lifecycle={"active": "2022-01-01"}),
    _fs("plat_mfg_twin", "Platform", "Manufacturing Digital Twin Platform",
        subtype="digital",
        desc="Digital twin of production lines integrating MES, SCADA and quality systems.",
        attrs={"platformType": "digital"},
        lifecycle={"phaseIn": "2024-06-01", "active": "2025-06-01"}),
    _fs("plat_integration", "Platform", "Enterprise Integration Platform",
        subtype="technical",
        desc="Central event backbone (Kafka) and API gateway for cross-application integration.",
        attrs={"platformType": "technical"},
        lifecycle={"active": "2022-06-01"}),
    _fs("plat_devex", "Platform", "Developer Experience Platform",
        subtype="technical",
        desc="Unified dev toolchain: source control, CI/CD, code quality, documentation.",
        attrs={"platformType": "technical"},
        lifecycle={"active": "2020-01-01"}),
]


# ── Systems ───────────────────────────────────────────────────────
SYSTEMS = [
    _fs("sys_prod_k8s", "System", "Production Kubernetes Cluster",
        desc="AKS cluster (West Europe) running all production microservices.",
        attrs={"systemType": "cluster", "environment": "production"}),
    _fs("sys_staging_k8s", "System", "Staging Kubernetes Cluster",
        desc="AKS cluster for pre-production validation and integration testing.",
        attrs={"systemType": "cluster", "environment": "staging"}),
    _fs("sys_dev_env", "System", "Development Environment",
        desc="Shared development VMs and local K3s clusters for developers.",
        attrs={"systemType": "virtualMachine", "environment": "development"}),
    _fs("sys_cicd_farm", "System", "CI/CD Build Farm",
        desc="Pool of build agents for Jenkins and GitHub Actions runners.",
        attrs={"systemType": "cluster", "environment": "production"}),
    _fs("sys_db_prod", "System", "Database Cluster (Production)",
        desc="Azure SQL and PostgreSQL Flexible Server instances for production workloads.",
        attrs={"systemType": "cluster", "environment": "production"}),
    _fs("sys_edge_gw", "System", "Edge Computing Gateway",
        desc="On-premise edge nodes in factory for low-latency SCADA and IoT pre-processing.",
        attrs={"systemType": "server", "environment": "production"}),
    _fs("sys_monitoring", "System", "Monitoring Stack",
        desc="Datadog, Grafana and PagerDuty infrastructure for observability.",
        attrs={"systemType": "cluster", "environment": "production"}),
    _fs("sys_dr", "System", "Backup & Disaster Recovery Site",
        desc="AWS-based DR site in US-East for business continuity.",
        attrs={"systemType": "cluster", "environment": "production"}),
]


# ===================================================================
# RELATIONS
# ===================================================================
RELATIONS = [
    # ── Application → Business Capability (relAppToBC) ────────────
    _rel("relAppToBC", "app_sap_s4", "bc_order_mgmt", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_s4", "bc_prod_planning", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_s4", "bc_procurement", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_s4", "bc_inventory", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_s4", "bc_accounting", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_s4", "bc_fp_a", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_teamcenter", "bc_prod_strategy", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_teamcenter", "bc_prod_req", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_teamcenter", "bc_mech_design", {"functionalSuitability": "perfect", "supportType": "supporting"}),
    _rel("relAppToBC", "app_teamcenter", "bc_elec_design", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_teamcenter", "bc_prod_portfolio", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_nx", "bc_cad_modeling", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_nx", "bc_mech_design", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_nx", "bc_thermal", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_altium", "bc_elec_design", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_altium", "bc_schematic", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_altium", "bc_pcb_layout", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_altium", "bc_component_sel", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_matlab", "bc_simulation", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_matlab", "bc_comm_protocols", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_opcenter", "bc_prod_execution", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_opcenter", "bc_assembly", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_opcenter", "bc_smt", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_opcenter_aps", "bc_prod_planning", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_nexascada", "bc_prod_execution", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_quality_insp", "bc_test_cal", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_quality_insp", "bc_qms", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_azure_iot", "bc_remote_monitor", {"functionalSuitability": "perfect", "supportType": "supporting"}),
    _rel("relAppToBC", "app_nexacloud", "bc_remote_monitor", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_nexacloud", "bc_data_mgmt", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_grafana", "bc_data_mgmt", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_powerbi", "bc_fp_a", {"supportType": "leading"}),
    _rel("relAppToBC", "app_powerbi", "bc_cust_analytics", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_sf_sales", "bc_lead_mgmt", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sf_sales", "bc_opp_mgmt", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sf_sales", "bc_account_mgmt", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sf_service", "bc_tech_support", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sf_service", "bc_warranty", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_sf_cpq", "bc_pricing", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_hubspot", "bc_cust_comm", {"supportType": "leading"}),
    _rel("relAppToBC", "app_servicenow", "bc_itsm", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_azure_ad", "bc_cybersecurity", {"supportType": "leading"}),
    _rel("relAppToBC", "app_okta", "bc_cybersecurity", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_nexaportal", "bc_cust_onboard", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_nexaconnect", "bc_remote_monitor", {"functionalSuitability": "perfect", "supportType": "supporting"}),
    _rel("relAppToBC", "app_sap_ariba", "bc_procurement", {"functionalSuitability": "appropriate", "supportType": "supporting"}),
    _rel("relAppToBC", "app_sap_ariba", "bc_vendor_mgmt", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_sap_sf", "bc_hcm", {"functionalSuitability": "appropriate", "supportType": "leading"}),
    _rel("relAppToBC", "app_jira", "bc_sw_dev", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_jira", "bc_fw_dev", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_bitbucket", "bc_sw_dev", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_snowflake", "bc_data_mgmt", {"functionalSuitability": "perfect", "supportType": "leading"}),
    _rel("relAppToBC", "app_splunk", "bc_cybersecurity", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_vault", "bc_cybersecurity", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_ptc_windchill", "bc_mech_design", {"functionalSuitability": "insufficient", "supportType": "supporting"}),
    _rel("relAppToBC", "app_anomaly_ai", "bc_remote_monitor", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_pred_maint", "bc_field_service", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_nexamobile", "bc_cust_onboard", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_docusign", "bc_legal_contract", {"supportType": "leading"}),
    _rel("relAppToBC", "app_coupa", "bc_procurement", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_adaptive", "bc_fp_a", {"supportType": "supporting"}),
    _rel("relAppToBC", "app_tableau", "bc_cust_analytics", {"supportType": "supporting"}),

    # ── Application → IT Component (relAppToITC) ─────────────────
    _rel("relAppToITC", "app_sap_s4", "itc_azure_sql"),
    _rel("relAppToITC", "app_nexacloud", "itc_postgres"),
    _rel("relAppToITC", "app_nexacloud", "itc_redis"),
    _rel("relAppToITC", "app_nexacloud", "itc_nodejs"),
    _rel("relAppToITC", "app_nexacloud", "itc_react"),
    _rel("relAppToITC", "app_nexaportal", "itc_react"),
    _rel("relAppToITC", "app_nexaportal", "itc_nginx"),
    _rel("relAppToITC", "app_nexacloud", "itc_nginx"),
    _rel("relAppToITC", "app_kafka", "itc_azure_eh"),
    _rel("relAppToITC", "app_timescale", "itc_postgres"),
    _rel("relAppToITC", "app_anomaly_ai", "itc_anomaly_model"),
    _rel("relAppToITC", "app_pred_maint", "itc_pred_model"),
    _rel("relAppToITC", "app_anomaly_ai", "itc_python"),
    _rel("relAppToITC", "app_pred_maint", "itc_python"),
    _rel("relAppToITC", "app_grafana", "itc_postgres"),
    _rel("relAppToITC", "app_azure_iot", "itc_azure_eh"),
    _rel("relAppToITC", "app_opcenter", "itc_dotnet"),
    _rel("relAppToITC", "app_opcenter", "itc_dell_r760"),

    # ── Application → System (relAppToSystem) ────────────────────
    _rel("relAppToSystem", "app_nexacloud", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_nexaportal", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_nexaconnect", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_grafana", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_kafka", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_anomaly_ai", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_pred_maint", "sys_prod_k8s"),
    _rel("relAppToSystem", "app_jenkins", "sys_cicd_farm"),
    _rel("relAppToSystem", "app_sap_s4", "sys_db_prod"),
    _rel("relAppToSystem", "app_splunk", "sys_monitoring"),
    _rel("relAppToSystem", "app_nexascada", "sys_edge_gw"),

    # ── Application → Data Object (relAppToDataObj) ──────────────
    _rel("relAppToDataObj", "app_sap_s4", "do_product", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_s4", "do_sales_order", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_s4", "do_purchase_order", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_s4", "do_prod_order", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_s4", "do_inventory", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_s4", "do_financial_tx", {"crudCreate": True, "crudRead": True, "crudUpdate": False, "crudDelete": False}),
    _rel("relAppToDataObj", "app_teamcenter", "do_product", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_teamcenter", "do_bom", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": True}),
    _rel("relAppToDataObj", "app_sf_sales", "do_customer", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sf_sales", "do_sales_order", {"crudCreate": True, "crudRead": True, "crudUpdate": False, "crudDelete": False}),
    _rel("relAppToDataObj", "app_nexacloud", "do_telemetry", {"crudCreate": True, "crudRead": True, "crudUpdate": False, "crudDelete": True}),
    _rel("relAppToDataObj", "app_nexacloud", "do_device_registry", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": True}),
    _rel("relAppToDataObj", "app_nexaconnect", "do_device_registry", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_nexaconnect", "do_firmware", {"crudCreate": True, "crudRead": True, "crudUpdate": False, "crudDelete": False}),
    _rel("relAppToDataObj", "app_opcenter", "do_prod_order", {"crudCreate": False, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_opcenter", "do_test_results", {"crudCreate": True, "crudRead": True, "crudUpdate": False, "crudDelete": False}),
    _rel("relAppToDataObj", "app_quality_insp", "do_test_results", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_quality_insp", "do_quality_report", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_sap_sf", "do_employee", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_nexascada", "do_telemetry", {"crudCreate": True, "crudRead": False, "crudUpdate": False, "crudDelete": False}),
    _rel("relAppToDataObj", "app_pred_maint", "do_maint_record", {"crudCreate": True, "crudRead": True, "crudUpdate": True, "crudDelete": False}),
    _rel("relAppToDataObj", "app_anomaly_ai", "do_telemetry", {"crudCreate": False, "crudRead": True, "crudUpdate": False, "crudDelete": False}),

    # ── Application → Interface (relAppToInterface) ──────────────
    _rel("relAppToInterface", "app_sap_s4", "if_sap_tc_bom"),
    _rel("relAppToInterface", "app_teamcenter", "if_sap_tc_bom"),
    _rel("relAppToInterface", "app_sap_s4", "if_sap_mes"),
    _rel("relAppToInterface", "app_opcenter", "if_sap_mes"),
    _rel("relAppToInterface", "app_azure_iot", "if_iot_kafka"),
    _rel("relAppToInterface", "app_kafka", "if_iot_kafka"),
    _rel("relAppToInterface", "app_kafka", "if_kafka_ts"),
    _rel("relAppToInterface", "app_timescale", "if_kafka_ts"),
    _rel("relAppToInterface", "app_sf_sales", "if_sf_sap_order"),
    _rel("relAppToInterface", "app_sap_s4", "if_sf_sap_order"),
    _rel("relAppToInterface", "app_nexaportal", "if_portal_iot"),
    _rel("relAppToInterface", "app_nexacloud", "if_portal_iot"),
    _rel("relAppToInterface", "app_nexamobile", "if_mobile_iot"),
    _rel("relAppToInterface", "app_nexacloud", "if_mobile_iot"),
    _rel("relAppToInterface", "app_sap_s4", "if_sap_pbi"),
    _rel("relAppToInterface", "app_powerbi", "if_sap_pbi"),
    _rel("relAppToInterface", "app_azure_ad", "if_ad_okta"),
    _rel("relAppToInterface", "app_okta", "if_ad_okta"),
    _rel("relAppToInterface", "app_opcenter", "if_mes_quality"),
    _rel("relAppToInterface", "app_quality_insp", "if_mes_quality"),
    _rel("relAppToInterface", "app_teamcenter", "if_plm_erp_bom"),
    _rel("relAppToInterface", "app_sap_s4", "if_plm_erp_bom"),
    _rel("relAppToInterface", "app_nexacloud", "if_iot_grafana"),
    _rel("relAppToInterface", "app_grafana", "if_iot_grafana"),
    _rel("relAppToInterface", "app_servicenow", "if_sn_teams"),
    _rel("relAppToInterface", "app_teams", "if_sn_teams"),
    _rel("relAppToInterface", "app_splunk", "if_all_splunk"),
    _rel("relAppToInterface", "app_github_actions", "if_gh_sonar"),
    _rel("relAppToInterface", "app_sonarqube", "if_gh_sonar"),
    _rel("relAppToInterface", "app_nexacloud", "if_iot_anomaly"),
    _rel("relAppToInterface", "app_anomaly_ai", "if_iot_anomaly"),
    _rel("relAppToInterface", "app_sap_s4", "if_sap_snow"),
    _rel("relAppToInterface", "app_snowflake", "if_sap_snow"),
    _rel("relAppToInterface", "app_hubspot", "if_hub_sf"),
    _rel("relAppToInterface", "app_sf_sales", "if_hub_sf"),
    _rel("relAppToInterface", "app_docusign", "if_docu_sf"),
    _rel("relAppToInterface", "app_sf_sales", "if_docu_sf"),
    _rel("relAppToInterface", "app_coupa", "if_coupa_sap"),
    _rel("relAppToInterface", "app_sap_s4", "if_coupa_sap"),

    # ── Application → Business Context (relAppToBizCtx) ──────────
    _rel("relAppToBizCtx", "app_teamcenter", "bctx_npi"),
    _rel("relAppToBizCtx", "app_teamcenter", "bctx_design_review"),
    _rel("relAppToBizCtx", "app_sap_s4", "bctx_otc"),
    _rel("relAppToBizCtx", "app_sap_s4", "bctx_p2p"),
    _rel("relAppToBizCtx", "app_opcenter", "bctx_mfg_exec"),
    _rel("relAppToBizCtx", "app_sf_service", "bctx_complaint"),
    _rel("relAppToBizCtx", "app_nexacloud", "bctx_ib2s"),
    _rel("relAppToBizCtx", "app_sf_sales", "bctx_otc"),

    # ── Initiative → Objective (relInitiativeToObjective) ────────
    _rel("relInitiativeToObjective", "init_digital_program", "obj_digital_tx"),
    _rel("relInitiativeToObjective", "init_mfg_excellence", "obj_industry40"),
    _rel("relInitiativeToObjective", "init_sap_migration", "obj_it_cost"),
    _rel("relInitiativeToObjective", "init_sap_migration", "obj_digital_tx"),
    _rel("relInitiativeToObjective", "init_iot_modern", "obj_iot_portfolio"),
    _rel("relInitiativeToObjective", "init_iot_modern", "obj_digital_tx"),
    _rel("relInitiativeToObjective", "init_sf_impl", "obj_cx"),
    _rel("relInitiativeToObjective", "init_cybersec_enhance", "obj_cybersec"),
    _rel("relInitiativeToObjective", "init_dw_consolidation", "obj_data_driven"),
    _rel("relInitiativeToObjective", "init_dw_consolidation", "obj_it_cost"),
    _rel("relInitiativeToObjective", "init_plm_retire", "obj_ttm"),
    _rel("relInitiativeToObjective", "init_plm_retire", "obj_it_cost"),
    _rel("relInitiativeToObjective", "init_devops", "obj_ttm"),
    _rel("relInitiativeToObjective", "init_ai_pred_maint", "obj_data_driven"),
    _rel("relInitiativeToObjective", "init_portal_redesign", "obj_cx"),
    _rel("relInitiativeToObjective", "init_zero_trust", "obj_cybersec"),

    # ── Initiative → Application (relInitiativeToApp) ────────────
    _rel("relInitiativeToApp", "init_sap_migration", "app_sap_s4"),
    _rel("relInitiativeToApp", "init_sap_migration", "app_ptc_windchill"),
    _rel("relInitiativeToApp", "init_iot_modern", "app_nexacloud"),
    _rel("relInitiativeToApp", "init_iot_modern", "app_azure_iot"),
    _rel("relInitiativeToApp", "init_iot_modern", "app_nexaconnect"),
    _rel("relInitiativeToApp", "init_iot_modern", "app_kafka"),
    _rel("relInitiativeToApp", "init_sf_impl", "app_sf_sales"),
    _rel("relInitiativeToApp", "init_sf_impl", "app_sf_service"),
    _rel("relInitiativeToApp", "init_sf_impl", "app_sf_cpq"),
    _rel("relInitiativeToApp", "init_cybersec_enhance", "app_okta"),
    _rel("relInitiativeToApp", "init_cybersec_enhance", "app_vault"),
    _rel("relInitiativeToApp", "init_cybersec_enhance", "app_splunk"),
    _rel("relInitiativeToApp", "init_dw_consolidation", "app_snowflake"),
    _rel("relInitiativeToApp", "init_dw_consolidation", "app_powerbi"),
    _rel("relInitiativeToApp", "init_plm_retire", "app_ptc_windchill"),
    _rel("relInitiativeToApp", "init_plm_retire", "app_teamcenter"),
    _rel("relInitiativeToApp", "init_devops", "app_jenkins"),
    _rel("relInitiativeToApp", "init_devops", "app_github_actions"),
    _rel("relInitiativeToApp", "init_devops", "app_sonarqube"),
    _rel("relInitiativeToApp", "init_devops", "app_bitbucket"),
    _rel("relInitiativeToApp", "init_ai_pred_maint", "app_anomaly_ai"),
    _rel("relInitiativeToApp", "init_ai_pred_maint", "app_pred_maint"),
    _rel("relInitiativeToApp", "init_portal_redesign", "app_nexaportal"),
    _rel("relInitiativeToApp", "init_portal_redesign", "app_nexamobile"),
    _rel("relInitiativeToApp", "init_zero_trust", "app_okta"),
    _rel("relInitiativeToApp", "init_zero_trust", "app_azure_ad"),

    # ── Initiative → Business Capability (relInitiativeToBC) ─────
    _rel("relInitiativeToBC", "init_sap_migration", "bc_order_mgmt"),
    _rel("relInitiativeToBC", "init_sap_migration", "bc_procurement"),
    _rel("relInitiativeToBC", "init_sap_migration", "bc_accounting"),
    _rel("relInitiativeToBC", "init_iot_modern", "bc_remote_monitor"),
    _rel("relInitiativeToBC", "init_sf_impl", "bc_lead_mgmt"),
    _rel("relInitiativeToBC", "init_sf_impl", "bc_opp_mgmt"),
    _rel("relInitiativeToBC", "init_sf_impl", "bc_account_mgmt"),
    _rel("relInitiativeToBC", "init_cybersec_enhance", "bc_cybersecurity"),
    _rel("relInitiativeToBC", "init_dw_consolidation", "bc_data_mgmt"),
    _rel("relInitiativeToBC", "init_devops", "bc_sw_dev"),
    _rel("relInitiativeToBC", "init_plm_retire", "bc_mech_design"),
    _rel("relInitiativeToBC", "init_ai_pred_maint", "bc_field_service"),
    _rel("relInitiativeToBC", "init_portal_redesign", "bc_cust_onboard"),
    _rel("relInitiativeToBC", "init_zero_trust", "bc_cybersecurity"),
    _rel("relInitiativeToBC", "init_zero_trust", "bc_network"),

    # ── Initiative → IT Component (relInitiativeToITC) ───────────
    _rel("relInitiativeToITC", "init_cybersec_enhance", "itc_fortinet"),
    _rel("relInitiativeToITC", "init_zero_trust", "itc_fortinet"),
    _rel("relInitiativeToITC", "init_iot_modern", "itc_aks"),
    _rel("relInitiativeToITC", "init_dw_consolidation", "itc_azure_sql"),

    # ── Initiative → Interface (relInitiativeToInterface) ────────
    _rel("relInitiativeToInterface", "init_sap_migration", "if_sap_tc_bom"),
    _rel("relInitiativeToInterface", "init_sap_migration", "if_plm_erp_bom"),
    _rel("relInitiativeToInterface", "init_iot_modern", "if_iot_kafka"),
    _rel("relInitiativeToInterface", "init_iot_modern", "if_iot_anomaly"),
    _rel("relInitiativeToInterface", "init_sf_impl", "if_sf_sap_order"),
    _rel("relInitiativeToInterface", "init_sf_impl", "if_hub_sf"),
    _rel("relInitiativeToInterface", "init_dw_consolidation", "if_sap_snow"),

    # ── Initiative → Data Object (relInitiativeToDataObj) ────────
    _rel("relInitiativeToDataObj", "init_iot_modern", "do_telemetry"),
    _rel("relInitiativeToDataObj", "init_iot_modern", "do_device_registry"),
    _rel("relInitiativeToDataObj", "init_dw_consolidation", "do_financial_tx"),
    _rel("relInitiativeToDataObj", "init_ai_pred_maint", "do_maint_record"),

    # ── Initiative → System (relInitiativeToSystem) ──────────────
    _rel("relInitiativeToSystem", "init_iot_modern", "sys_prod_k8s"),
    _rel("relInitiativeToSystem", "init_iot_modern", "sys_edge_gw"),
    _rel("relInitiativeToSystem", "init_zero_trust", "sys_prod_k8s"),
    _rel("relInitiativeToSystem", "init_devops", "sys_cicd_farm"),

    # ── Objective → Business Capability (relObjectiveToBC) ───────
    _rel("relObjectiveToBC", "obj_digital_tx", "bc_it"),
    _rel("relObjectiveToBC", "obj_digital_tx", "bc_data_mgmt"),
    _rel("relObjectiveToBC", "obj_ttm", "bc_eng_design"),
    _rel("relObjectiveToBC", "obj_ttm", "bc_sw_dev"),
    _rel("relObjectiveToBC", "obj_industry40", "bc_manufacturing"),
    _rel("relObjectiveToBC", "obj_industry40", "bc_prod_execution"),
    _rel("relObjectiveToBC", "obj_cx", "bc_crm"),
    _rel("relObjectiveToBC", "obj_cx", "bc_cust_onboard"),
    _rel("relObjectiveToBC", "obj_cybersec", "bc_cybersecurity"),
    _rel("relObjectiveToBC", "obj_cybersec", "bc_network"),
    _rel("relObjectiveToBC", "obj_it_cost", "bc_apm"),
    _rel("relObjectiveToBC", "obj_it_cost", "bc_cloud_infra"),
    _rel("relObjectiveToBC", "obj_data_driven", "bc_data_mgmt"),
    _rel("relObjectiveToBC", "obj_data_driven", "bc_cust_analytics"),
    _rel("relObjectiveToBC", "obj_iot_portfolio", "bc_plm"),
    _rel("relObjectiveToBC", "obj_iot_portfolio", "bc_remote_monitor"),

    # ── Organization → Application (relOrgToApp) ─────────────────
    _rel("relOrgToApp", "org_engineering", "app_teamcenter", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_engineering", "app_nx", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_engineering", "app_altium", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_engineering", "app_matlab", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_engineering", "app_jira", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_engineering", "app_bitbucket", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_manufacturing", "app_opcenter", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_manufacturing", "app_opcenter_aps", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_manufacturing", "app_nexascada", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_manufacturing", "app_quality_insp", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_sales", "app_sf_sales", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_sales", "app_sf_cpq", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_sales", "app_hubspot", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_support", "app_sf_service", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_it_ops", "app_servicenow", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_it_ops", "app_splunk", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_it_ops", "app_azure_ad", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_it_ops", "app_okta", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_corporate", "app_sap_s4", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_finance", "app_adaptive", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_finance", "app_powerbi", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_hr", "app_sap_sf", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_rnd", "app_nexacloud", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_rnd", "app_anomaly_ai", {"usageType": "owner"}),
    _rel("relOrgToApp", "org_rnd", "app_pred_maint", {"usageType": "owner"}),

    # ── Organization → Objective (relOrgToObjective) ─────────────
    _rel("relOrgToObjective", "org_engineering", "obj_ttm"),
    _rel("relOrgToObjective", "org_engineering", "obj_iot_portfolio"),
    _rel("relOrgToObjective", "org_it_ops", "obj_cybersec"),
    _rel("relOrgToObjective", "org_it_ops", "obj_it_cost"),
    _rel("relOrgToObjective", "org_sales", "obj_cx"),
    _rel("relOrgToObjective", "org_manufacturing", "obj_industry40"),
    _rel("relOrgToObjective", "org_rnd", "obj_data_driven"),
    _rel("relOrgToObjective", "org_corporate", "obj_digital_tx"),

    # ── Organization → Initiative (relOrgToInitiative) ───────────
    _rel("relOrgToInitiative", "org_it_ops", "init_sap_migration"),
    _rel("relOrgToInitiative", "org_it_ops", "init_cybersec_enhance"),
    _rel("relOrgToInitiative", "org_it_ops", "init_zero_trust"),
    _rel("relOrgToInitiative", "org_sales", "init_sf_impl"),
    _rel("relOrgToInitiative", "org_rnd", "init_iot_modern"),
    _rel("relOrgToInitiative", "org_rnd", "init_ai_pred_maint"),
    _rel("relOrgToInitiative", "org_engineering", "init_devops"),
    _rel("relOrgToInitiative", "org_engineering", "init_plm_retire"),
    _rel("relOrgToInitiative", "org_manufacturing", "init_mfg_excellence"),
    _rel("relOrgToInitiative", "org_corporate", "init_digital_program"),
    _rel("relOrgToInitiative", "org_it_ops", "init_dw_consolidation"),
    _rel("relOrgToInitiative", "org_support", "init_portal_redesign"),

    # ── Organization → Business Context (relOrgToBizCtx) ─────────
    _rel("relOrgToBizCtx", "org_engineering", "bctx_npi"),
    _rel("relOrgToBizCtx", "org_engineering", "bctx_design_review"),
    _rel("relOrgToBizCtx", "org_manufacturing", "bctx_mfg_exec"),
    _rel("relOrgToBizCtx", "org_sales", "bctx_otc"),
    _rel("relOrgToBizCtx", "org_supply_chain", "bctx_p2p"),
    _rel("relOrgToBizCtx", "org_support", "bctx_complaint"),
    _rel("relOrgToBizCtx", "org_qa_eng", "bctx_regulatory_sub"),
    _rel("relOrgToBizCtx", "org_rnd", "bctx_i2p"),

    # ── Platform → Application (relPlatformToApp) ────────────────
    _rel("relPlatformToApp", "plat_iot", "app_azure_iot"),
    _rel("relPlatformToApp", "plat_iot", "app_nexacloud"),
    _rel("relPlatformToApp", "plat_iot", "app_nexaconnect"),
    _rel("relPlatformToApp", "plat_iot", "app_kafka"),
    _rel("relPlatformToApp", "plat_iot", "app_timescale"),
    _rel("relPlatformToApp", "plat_iot", "app_grafana"),
    _rel("relPlatformToApp", "plat_mfg_twin", "app_opcenter"),
    _rel("relPlatformToApp", "plat_mfg_twin", "app_nexascada"),
    _rel("relPlatformToApp", "plat_mfg_twin", "app_quality_insp"),
    _rel("relPlatformToApp", "plat_integration", "app_kafka"),
    _rel("relPlatformToApp", "plat_integration", "app_sap_s4"),
    _rel("relPlatformToApp", "plat_devex", "app_jenkins"),
    _rel("relPlatformToApp", "plat_devex", "app_bitbucket"),
    _rel("relPlatformToApp", "plat_devex", "app_github_actions"),
    _rel("relPlatformToApp", "plat_devex", "app_sonarqube"),
    _rel("relPlatformToApp", "plat_devex", "app_jira"),
    _rel("relPlatformToApp", "plat_devex", "app_confluence"),

    # ── Platform → Objective (relPlatformToObjective) ────────────
    _rel("relPlatformToObjective", "plat_iot", "obj_iot_portfolio"),
    _rel("relPlatformToObjective", "plat_iot", "obj_digital_tx"),
    _rel("relPlatformToObjective", "plat_mfg_twin", "obj_industry40"),
    _rel("relPlatformToObjective", "plat_integration", "obj_digital_tx"),
    _rel("relPlatformToObjective", "plat_devex", "obj_ttm"),

    # ── Platform → IT Component (relPlatformToITC) ───────────────
    _rel("relPlatformToITC", "plat_iot", "itc_aks"),
    _rel("relPlatformToITC", "plat_iot", "itc_azure_eh"),
    _rel("relPlatformToITC", "plat_iot", "itc_postgres"),
    _rel("relPlatformToITC", "plat_iot", "itc_redis"),
    _rel("relPlatformToITC", "plat_devex", "itc_azure_devops"),
    _rel("relPlatformToITC", "plat_devex", "itc_github"),

    # ── IT Component → Tech Category (relITCToTechCat) ───────────
    _rel("relITCToTechCat", "itc_postgres", "tc_rdbms", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_azure_sql", "tc_rdbms", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_redis", "tc_databases", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_azure_eh", "tc_msg_broker", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_nginx", "tc_api_gw", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_aks", "tc_container_orch", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_azure_vm", "tc_compute", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_aws_ec2", "tc_compute", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_fortinet", "tc_netsec", {"resourceClassification": "standard"}),
    _rel("relITCToTechCat", "itc_azure_devops", "tc_cicd", {"resourceClassification": "tolerated"}),
    _rel("relITCToTechCat", "itc_github", "tc_cicd", {"resourceClassification": "phaseIn"}),

    # ── Interface → Data Object (relInterfaceToDataObj) ──────────
    _rel("relInterfaceToDataObj", "if_sap_tc_bom", "do_bom"),
    _rel("relInterfaceToDataObj", "if_sap_mes", "do_prod_order"),
    _rel("relInterfaceToDataObj", "if_iot_kafka", "do_telemetry"),
    _rel("relInterfaceToDataObj", "if_kafka_ts", "do_telemetry"),
    _rel("relInterfaceToDataObj", "if_sf_sap_order", "do_sales_order"),
    _rel("relInterfaceToDataObj", "if_sf_sap_order", "do_customer"),
    _rel("relInterfaceToDataObj", "if_portal_iot", "do_device_registry"),
    _rel("relInterfaceToDataObj", "if_mobile_iot", "do_device_registry"),
    _rel("relInterfaceToDataObj", "if_sap_pbi", "do_financial_tx"),
    _rel("relInterfaceToDataObj", "if_mes_quality", "do_test_results"),
    _rel("relInterfaceToDataObj", "if_plm_erp_bom", "do_bom"),
    _rel("relInterfaceToDataObj", "if_plm_erp_bom", "do_product"),
    _rel("relInterfaceToDataObj", "if_iot_anomaly", "do_telemetry"),
    _rel("relInterfaceToDataObj", "if_sap_snow", "do_financial_tx"),
    _rel("relInterfaceToDataObj", "if_sap_snow", "do_sales_order"),
    _rel("relInterfaceToDataObj", "if_hub_sf", "do_customer"),
    _rel("relInterfaceToDataObj", "if_coupa_sap", "do_purchase_order"),

    # ── Interface → IT Component (relInterfaceToITC) ─────────────
    _rel("relInterfaceToITC", "if_iot_kafka", "itc_azure_eh"),
    _rel("relInterfaceToITC", "if_kafka_ts", "itc_postgres"),
    _rel("relInterfaceToITC", "if_portal_iot", "itc_nginx"),
    _rel("relInterfaceToITC", "if_iot_anomaly", "itc_anomaly_model"),

    # ── Provider → IT Component (relProviderToITC) ───────────────
    _rel("relProviderToITC", "prov_microsoft", "itc_azure_sql"),
    _rel("relProviderToITC", "prov_microsoft", "itc_aks"),
    _rel("relProviderToITC", "prov_microsoft", "itc_azure_eh"),
    _rel("relProviderToITC", "prov_microsoft", "itc_azure_vm"),
    _rel("relProviderToITC", "prov_microsoft", "itc_azure_devops"),
    _rel("relProviderToITC", "prov_microsoft", "itc_azure_monitor"),
    _rel("relProviderToITC", "prov_microsoft", "itc_dotnet"),
    _rel("relProviderToITC", "prov_dell", "itc_dell_r760"),
    _rel("relProviderToITC", "prov_cisco", "itc_cisco_9300"),
    _rel("relProviderToITC", "prov_fortinet", "itc_fortinet"),
    _rel("relProviderToITC", "prov_aws", "itc_aws_ec2"),
    _rel("relProviderToITC", "prov_datadog", "itc_datadog"),

    # ── Provider → Initiative (relProviderToInitiative) ──────────
    _rel("relProviderToInitiative", "prov_sap", "init_sap_migration"),
    _rel("relProviderToInitiative", "prov_salesforce", "init_sf_impl"),
    _rel("relProviderToInitiative", "prov_microsoft", "init_zero_trust"),
    _rel("relProviderToInitiative", "prov_siemens", "init_mfg_excellence"),

    # ── Business Context → Business Capability (relBizCtxToBC) ───
    _rel("relBizCtxToBC", "bctx_npi", "bc_plm"),
    _rel("relBizCtxToBC", "bctx_npi", "bc_eng_design"),
    _rel("relBizCtxToBC", "bctx_npi", "bc_certification"),
    _rel("relBizCtxToBC", "bctx_otc", "bc_order_mgmt"),
    _rel("relBizCtxToBC", "bctx_otc", "bc_sales"),
    _rel("relBizCtxToBC", "bctx_otc", "bc_logistics"),
    _rel("relBizCtxToBC", "bctx_i2p", "bc_prod_strategy"),
    _rel("relBizCtxToBC", "bctx_i2p", "bc_eng_design"),
    _rel("relBizCtxToBC", "bctx_i2p", "bc_manufacturing"),
    _rel("relBizCtxToBC", "bctx_ib2s", "bc_service"),
    _rel("relBizCtxToBC", "bctx_ib2s", "bc_remote_monitor"),
    _rel("relBizCtxToBC", "bctx_ib2s", "bc_field_service"),
    _rel("relBizCtxToBC", "bctx_p2p", "bc_procurement"),
    _rel("relBizCtxToBC", "bctx_p2p", "bc_vendor_mgmt"),
    _rel("relBizCtxToBC", "bctx_mfg_exec", "bc_prod_execution"),
    _rel("relBizCtxToBC", "bctx_mfg_exec", "bc_test_cal"),
    _rel("relBizCtxToBC", "bctx_complaint", "bc_tech_support"),
    _rel("relBizCtxToBC", "bctx_complaint", "bc_warranty"),
    _rel("relBizCtxToBC", "bctx_design_review", "bc_mech_design"),
    _rel("relBizCtxToBC", "bctx_design_review", "bc_elec_design"),
    _rel("relBizCtxToBC", "bctx_regulatory_sub", "bc_regulatory"),
    _rel("relBizCtxToBC", "bctx_regulatory_sub", "bc_certification"),
]


# ===================================================================
# TAG GROUPS  (with inline tag definitions and fact-sheet assignments)
# ===================================================================
def _tg(name, mode="multi", restrict=None, tags=None, desc=None):
    return {"id": uuid.uuid4(), "name": name, "mode": mode, "description": desc,
            "restrict_to_types": restrict, "tags": tags or []}

def _tag(name, color=None, assign_to=None):
    return {"id": uuid.uuid4(), "name": name, "color": color, "assign_to": assign_to or []}

TAG_GROUPS = [
    _tg("Compliance Framework", desc="Regulatory and standard compliance tags.", tags=[
        _tag("ISO 9001", "#4caf50", ["app_sap_s4", "app_teamcenter", "app_opcenter", "app_quality_insp"]),
        _tag("ISO 27001", "#2196f3", ["app_azure_ad", "app_okta", "app_vault", "app_splunk", "app_nexacloud"]),
        _tag("IEC 62443", "#ff9800", ["app_nexascada", "app_nexacloud", "app_azure_iot", "app_nexaconnect"]),
        _tag("CE Marking", "#9c27b0", ["bctx_smartsense_s100", "bctx_smartsense_s200", "bctx_gateway_g500", "bctx_actuator_a300", "bctx_nexahub_h100"]),
        _tag("UL Listed", "#e91e63", ["bctx_smartsense_s100", "bctx_gateway_g500", "bctx_actuator_a300"]),
        _tag("RoHS", "#009688", ["bctx_smartsense_s100", "bctx_smartsense_s200", "bctx_gateway_g500", "bctx_actuator_a300", "bctx_nexahub_h100"]),
    ]),
    _tg("Business Domain", desc="Primary business domain.", tags=[
        _tag("Engineering", "#1565c0", ["app_teamcenter", "app_nx", "app_altium", "app_matlab", "app_bitbucket", "app_jira"]),
        _tag("Manufacturing", "#e65100", ["app_opcenter", "app_opcenter_aps", "app_nexascada", "app_quality_insp"]),
        _tag("Sales", "#2e7d32", ["app_sf_sales", "app_sf_cpq", "app_hubspot", "app_tableau"]),
        _tag("Operations", "#4527a0", ["app_servicenow", "app_m365", "app_teams", "app_sharepoint"]),
        _tag("IoT", "#00838f", ["app_azure_iot", "app_nexacloud", "app_nexaconnect", "app_nexaportal", "app_nexamobile", "app_grafana", "app_kafka", "app_timescale"]),
        _tag("Corporate", "#37474f", ["app_sap_s4", "app_sap_sf", "app_adaptive", "app_coupa", "app_docusign", "app_powerbi"]),
    ]),
    _tg("Technology Stack", desc="Technology classification.",
        restrict=["Application", "ITComponent"], tags=[
        _tag("Frontend", "#e91e63", ["app_nexaportal", "app_nexamobile", "itc_react"]),
        _tag("Backend", "#3f51b5", ["app_nexacloud", "app_nexaconnect", "itc_nodejs", "itc_python", "itc_dotnet"]),
        _tag("Data", "#9c27b0", ["app_snowflake", "app_powerbi", "app_timescale", "app_grafana", "itc_postgres", "itc_redis"]),
        _tag("DevOps", "#ff5722", ["app_jenkins", "app_github_actions", "app_sonarqube", "itc_azure_devops", "itc_github"]),
        _tag("Security", "#f44336", ["app_okta", "app_azure_ad", "app_vault", "app_splunk", "itc_fortinet"]),
        _tag("IoT / Embedded", "#00bcd4", ["app_azure_iot", "app_nexascada", "itc_anomaly_model", "itc_pred_model"]),
    ]),
    _tg("Lifecycle Stage", mode="single", desc="Strategic lifecycle classification.",
        restrict=["Application"], tags=[
        _tag("Strategic", "#2e7d32", ["app_nexacloud", "app_azure_iot", "app_sf_sales", "app_snowflake", "app_github_actions"]),
        _tag("Core", "#1976d2", ["app_sap_s4", "app_teamcenter", "app_opcenter", "app_servicenow", "app_m365", "app_okta"]),
        _tag("Legacy", "#ff9800", ["app_nexascada", "app_jenkins", "app_bitbucket"]),
        _tag("Sunset", "#f44336", ["app_ptc_windchill"]),
    ]),
    _tg("Cost Center", mode="single", desc="Primary cost center allocation.", tags=[
        _tag("Engineering", "#1565c0", ["app_teamcenter", "app_nx", "app_altium", "app_matlab", "app_jira", "app_bitbucket"]),
        _tag("Manufacturing", "#e65100", ["app_opcenter", "app_opcenter_aps", "app_nexascada", "app_quality_insp"]),
        _tag("Sales", "#2e7d32", ["app_sf_sales", "app_sf_service", "app_sf_cpq", "app_hubspot", "app_tableau"]),
        _tag("IT", "#4527a0", ["app_servicenow", "app_azure_ad", "app_okta", "app_vault", "app_splunk", "app_snowflake", "app_jenkins", "app_github_actions"]),
        _tag("R&D", "#00838f", ["app_nexacloud", "app_nexaconnect", "app_anomaly_ai", "app_pred_maint", "app_azure_iot", "app_kafka", "app_timescale", "app_grafana"]),
        _tag("Corporate", "#37474f", ["app_sap_s4", "app_sap_sf", "app_sap_ariba", "app_m365", "app_teams", "app_sharepoint", "app_adaptive", "app_coupa", "app_docusign", "app_powerbi"]),
    ]),
]


# ===================================================================
# ENRICHMENT DATA – descriptions, lifecycle for items missing them
# ===================================================================
_ENRICHMENTS: dict[str, dict] = {
    # -- Organizations (desc + lifecycle) --
    "org_engineering": {
        "description": "Engineering division responsible for product design, firmware, software, and quality assurance.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_hw_eng": {
        "description": "Team designing PCBs, enclosures, and electromechanical assemblies for all product lines.",
        "lifecycle": {"active": "2010-01-01"},
    },
    "org_fw_eng": {
        "description": "Team developing real-time firmware for sensors, actuators, and IoT gateways.",
        "lifecycle": {"active": "2012-06-01"},
    },
    "org_sw_eng": {
        "description": "Team building cloud services, mobile apps, and internal development tools.",
        "lifecycle": {"active": "2015-01-01"},
    },
    "org_sys_eng": {
        "description": "Team responsible for system-level architecture, integration testing, and V&V.",
        "lifecycle": {"active": "2014-01-01"},
    },
    "org_qa_eng": {
        "description": "Team managing test automation, reliability analysis, and process validation.",
        "lifecycle": {"active": "2008-01-01"},
    },
    "org_manufacturing": {
        "description": "Division operating production lines for sensors, actuators, and IoT gateways in Stuttgart.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_prod_sensors": {
        "description": "Production line for SmartSense S100 and S200 sensor families.",
        "lifecycle": {"active": "2012-01-01"},
    },
    "org_prod_actuators": {
        "description": "Production line for SmartActuator A300 series electromechanical actuators.",
        "lifecycle": {"active": "2010-06-01"},
    },
    "org_prod_gateways": {
        "description": "Production line for G500 IoT gateway and NexaHub H100.",
        "lifecycle": {"active": "2018-01-01"},
    },
    "org_supply_chain": {
        "description": "Team managing procurement, warehouse operations, and outbound logistics.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_sales": {
        "description": "Division driving revenue through direct sales, channel partners, and marketing campaigns.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_emea": {
        "description": "Regional sales team covering Europe, Middle East, and Africa.",
        "lifecycle": {"active": "2006-01-01"},
    },
    "org_americas": {
        "description": "Regional sales team covering North and South America.",
        "lifecycle": {"active": "2009-01-01"},
    },
    "org_apac": {
        "description": "Regional sales team covering Asia-Pacific including China, Japan, and Australia.",
        "lifecycle": {"active": "2013-01-01"},
    },
    "org_marketing": {
        "description": "Team managing brand, content marketing, trade shows, and digital campaigns.",
        "lifecycle": {"active": "2008-01-01"},
    },
    "org_operations": {
        "description": "Division managing IT infrastructure, facilities, and customer support.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_it_ops": {
        "description": "Team responsible for infrastructure, cloud, networking, and IT service management.",
        "lifecycle": {"active": "2007-01-01"},
    },
    "org_facilities": {
        "description": "Team managing factory and office facilities, HSE compliance, and physical security.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_support": {
        "description": "Team handling technical support tickets, field service dispatch, and warranty claims.",
        "lifecycle": {"active": "2008-06-01"},
    },
    "org_rnd": {
        "description": "Division focused on advanced research, prototyping, and new technology exploration.",
        "lifecycle": {"active": "2012-01-01"},
    },
    "org_research": {
        "description": "Team conducting applied research in sensing, edge AI, and novel materials.",
        "lifecycle": {"active": "2016-01-01"},
    },
    "org_innovation": {
        "description": "Team running rapid prototyping sprints and evaluating emerging technologies.",
        "lifecycle": {"active": "2019-01-01"},
    },
    "org_corporate": {
        "description": "Corporate functions including finance, HR, legal, and strategic management.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_finance": {
        "description": "Team managing financial planning, accounting, controlling, and statutory reporting.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_hr": {
        "description": "Team responsible for talent acquisition, development, payroll, and company culture.",
        "lifecycle": {"active": "2005-03-15"},
    },
    "org_legal": {
        "description": "Team handling contracts, IP protection, regulatory compliance, and data privacy.",
        "lifecycle": {"active": "2007-01-01"},
    },
    # -- L2 Business Capabilities (desc only) --
    "bc_prod_strategy": {"description": "Define product vision, roadmaps, and investment priorities across product families."},
    "bc_prod_req": {"description": "Capture, trace, and manage product requirements across stakeholders and development phases."},
    "bc_prod_portfolio": {"description": "Manage the product portfolio lifecycle including profitability and strategic fit analysis."},
    "bc_prod_retire": {"description": "Plan and execute end-of-life for legacy products including spare parts and customer migration."},
    "bc_mech_design": {"description": "Design mechanical enclosures, assemblies, and thermal solutions for sensor and actuator products."},
    "bc_elec_design": {"description": "Design electronic schematics, PCB layouts, and select components for all product lines."},
    "bc_fw_dev": {"description": "Develop embedded firmware for microcontrollers and real-time operating systems across product lines."},
    "bc_sw_dev": {"description": "Build cloud-native applications, REST/GraphQL APIs, and cross-platform mobile apps."},
    "bc_sys_integration": {"description": "Integrate hardware, firmware, and software subsystems into complete validated product systems."},
    "bc_simulation": {"description": "Run FEA, CFD, signal integrity simulations, and hardware-in-the-loop testing for design validation."},
    "bc_prod_planning": {"description": "Plan production schedules, capacity allocation, and material requirements for all product lines."},
    "bc_prod_execution": {"description": "Execute manufacturing work orders on the shop floor from raw materials to finished goods."},
    "bc_assembly": {"description": "Assemble sub-components into finished goods and run integration checks before packaging."},
    "bc_test_cal": {"description": "Perform electrical, functional, and environmental testing and calibration on every production unit."},
    "bc_packaging": {"description": "Package finished goods with documentation and coordinate outbound shipments to customers."},
    "bc_procurement": {"description": "Source and purchase raw materials, electronic components, and external services."},
    "bc_vendor_mgmt": {"description": "Qualify, assess, and manage supplier relationships, scorecards, and performance."},
    "bc_inventory": {"description": "Track stock levels across warehouses, manage replenishment, and optimize inventory turns."},
    "bc_logistics": {"description": "Manage warehouse operations, inbound receiving, outbound logistics, and freight carriers."},
    "bc_demand_forecast": {"description": "Forecast product demand using historical data and market signals for production planning."},
    "bc_lead_mgmt": {"description": "Capture, qualify, and nurture sales leads across digital and field channels."},
    "bc_opp_mgmt": {"description": "Track and manage sales opportunities through the pipeline from qualification to close."},
    "bc_order_mgmt": {"description": "Process customer orders from entry through fulfillment, invoicing, and delivery tracking."},
    "bc_pricing": {"description": "Configure complex product bundles, calculate volume pricing, and generate customer quotes."},
    "bc_channel_mgmt": {"description": "Manage distribution channels, reseller programs, and OEM partner agreements."},
    "bc_cust_onboard": {"description": "Onboard new customers with account setup, product training, and first deployment support."},
    "bc_account_mgmt": {"description": "Manage ongoing customer relationships, renewals, and identify cross-sell opportunities."},
    "bc_cust_comm": {"description": "Manage email campaigns, newsletters, webinars, and personalized customer outreach."},
    "bc_cust_analytics": {"description": "Analyze customer behavior patterns, churn risk indicators, and lifetime value metrics."},
    "bc_tech_support": {"description": "Provide L1-L3 technical support for deployed sensors, actuators, and IoT gateways."},
    "bc_field_service": {"description": "Dispatch and manage field technicians for on-site installation, maintenance, and repair."},
    "bc_warranty": {"description": "Track warranty entitlements, process claims, and manage replacement part fulfillment."},
    "bc_spare_parts": {"description": "Manage spare parts inventory, forecasting, and fulfillment for aftermarket service."},
    "bc_remote_monitor": {"description": "Monitor deployed device health remotely and diagnose issues via real-time telemetry streams."},
    "bc_fp_a": {"description": "Financial budgeting, rolling forecasts, variance analysis, and management reporting."},
    "bc_accounting": {"description": "General ledger, accounts payable/receivable, cost center accounting, and statutory reporting."},
    "bc_hcm": {"description": "Recruit, develop, and retain talent; administer payroll, benefits, and workforce analytics."},
    "bc_legal_contract": {"description": "Draft, review, and manage commercial contracts, NDAs, and legal obligations."},
    "bc_corp_strategy": {"description": "Define corporate vision, M&A strategy, and long-term investment priorities."},
    "bc_itsm": {"description": "Manage IT incidents, service requests, change management, and service-level agreements."},
    "bc_cybersecurity": {"description": "Protect information assets through threat detection, incident response, and compliance."},
    "bc_data_mgmt": {"description": "Govern, integrate, and ensure quality of enterprise data assets across all domains."},
    "bc_cloud_infra": {"description": "Provision, monitor, and optimize cloud resources across Azure and AWS."},
    "bc_apm": {"description": "Assess, rationalize, and strategically plan the enterprise application landscape."},
    "bc_network": {"description": "Design, operate, and secure enterprise LAN, WAN, and factory-floor network infrastructure."},
    "bc_qms": {"description": "Maintain ISO 9001 quality management system processes and drive continuous improvement."},
    "bc_regulatory": {"description": "Ensure products and manufacturing processes meet all applicable regulatory requirements."},
    "bc_env_compliance": {"description": "Manage environmental regulations including RoHS, REACH, WEEE, and sustainability reporting."},
    "bc_certification": {"description": "Obtain and maintain CE, UL, IEC, and other required product certifications."},
    "bc_audit": {"description": "Plan and execute internal quality audits and coordinate external certification audits."},
    # -- L3 Business Capabilities (desc only) --
    "bc_cad_modeling": {"description": "Create detailed 3D parametric models of enclosures and assemblies using Siemens NX."},
    "bc_tolerance": {"description": "Analyze dimensional tolerances and geometric fits to ensure manufacturability."},
    "bc_thermal": {"description": "Design thermal management solutions for heat dissipation in sealed IP67 enclosures."},
    "bc_schematic": {"description": "Create electronic circuit schematics for sensor front-ends and gateway power systems."},
    "bc_pcb_layout": {"description": "Design multi-layer PCB layouts optimizing signal integrity, EMI, and manufacturability."},
    "bc_component_sel": {"description": "Select electronic components balancing availability, cost, reliability, and lifecycle."},
    "bc_rtos": {"description": "Configure and maintain FreeRTOS/Zephyr RTOS for deterministic firmware execution."},
    "bc_comm_protocols": {"description": "Implement BLE, Zigbee, LoRaWAN, Wi-Fi, and CAN bus communication stacks."},
    "bc_ota": {"description": "Manage secure over-the-air firmware updates with delta patching, rollback, and validation."},
    "bc_cloud_app_dev": {"description": "Build cloud-native microservices on AKS using Node.js, Python, and serverless functions."},
    "bc_mobile_dev": {"description": "Develop cross-platform React Native mobile apps for iOS and Android."},
    "bc_api_dev": {"description": "Design and implement RESTful and GraphQL APIs for internal and partner consumption."},
    "bc_smt": {"description": "Surface-mount technology: pick-and-place, solder paste, and reflow soldering processes."},
    "bc_tht": {"description": "Through-hole component insertion and wave soldering for power and connector assemblies."},
    "bc_final_assembly": {"description": "Final assembly of tested PCBAs into enclosures with connectors, labels, and firmware."},
    # -- Tech Categories (desc only) --
    "tc_databases": {"description": "Relational, NoSQL, time-series databases and object storage solutions."},
    "tc_middleware": {"description": "Message brokers, event streaming, ESBs, and API gateway technologies."},
    "tc_cloud": {"description": "IaaS, PaaS, container orchestration, and serverless cloud services."},
    "tc_security": {"description": "Identity management, network security, encryption, and secrets management."},
    "tc_devtools": {"description": "CI/CD pipelines, source control, code quality tools, and developer productivity."},
    "tc_rdbms": {"description": "SQL-based relational databases for transactional and analytical workloads."},
    "tc_tsdb": {"description": "Specialized databases optimized for high-volume time-stamped sensor data."},
    "tc_obj_store": {"description": "Blob and object storage for firmware images, backups, and unstructured data."},
    "tc_msg_broker": {"description": "Event streaming and message queuing platforms for real-time data pipelines."},
    "tc_api_gw": {"description": "HTTP reverse proxies, rate limiters, and API lifecycle management tools."},
    "tc_container_orch": {"description": "Kubernetes and container runtime management for microservice workloads."},
    "tc_compute": {"description": "Virtual machines, bare-metal servers, and serverless compute resources."},
    "tc_iam": {"description": "Authentication, authorization, SSO, MFA, and directory services."},
    "tc_netsec": {"description": "Firewalls, IDS/IPS, VPN, and network micro-segmentation technologies."},
    "tc_cicd": {"description": "Continuous integration and continuous deployment automation pipelines."},
    "tc_code_quality": {"description": "Static analysis, linting, code coverage, and security scanning tools."},
}


# ===================================================================
# SEED FUNCTION  (called from main.py or CLI)
# ===================================================================
def _compute_completion(d: dict, type_schemas: dict[str, list]) -> float:
    """Compute completion score for a fact-sheet dict using the same logic as the API."""
    schema = type_schemas.get(d["type"], [])
    total_weight = 0.0
    filled_weight = 0.0
    attrs = d.get("attributes", {})
    for section in schema:
        for field in section.get("fields", []):
            weight = field.get("weight", 1)
            if weight <= 0:
                continue
            total_weight += weight
            val = attrs.get(field["key"])
            if val is not None and val != "" and val is not False:
                filled_weight += weight
    # description
    total_weight += 1
    if d.get("description") and d["description"].strip():
        filled_weight += 1
    # lifecycle
    total_weight += 1
    lc = d.get("lifecycle", {})
    if any(lc.get(p) for p in ("plan", "phaseIn", "active", "phaseOut", "endOfLife")):
        filled_weight += 1
    if total_weight == 0:
        return 0.0
    return round((filled_weight / total_weight) * 100, 1)


async def seed_demo_data(db: AsyncSession) -> dict:
    """Insert full demo dataset. Returns counts. Safe to re-run (skips if data exists)."""
    result = await db.execute(select(FactSheet.id).limit(1))
    if result.scalar_one_or_none() is not None:
        return {"skipped": True, "reason": "fact sheets already exist"}

    all_fs = (
        ORGANIZATIONS + BUSINESS_CAPABILITIES + BUSINESS_CONTEXTS
        + APPLICATIONS + IT_COMPONENTS + INTERFACES + DATA_OBJECTS
        + TECH_CATEGORIES + PROVIDERS + OBJECTIVES + INITIATIVES
        + PLATFORMS + SYSTEMS
    )

    # Build reverse lookup: UUID → ref name
    uuid_to_ref = {uid: ref for ref, uid in _refs.items()}

    # Enrich with extra descriptions / lifecycle where missing
    for d in all_fs:
        ref = uuid_to_ref.get(d["id"])
        if ref and ref in _ENRICHMENTS:
            extra = _ENRICHMENTS[ref]
            if "description" in extra and not d.get("description"):
                d["description"] = extra["description"]
            if "lifecycle" in extra and not any(d.get("lifecycle", {}).values()):
                d["lifecycle"] = extra["lifecycle"]

    # Compute completion scores using the metamodel type schemas
    type_schemas = {t["key"]: t.get("fields_schema", []) for t in _META_TYPES}
    for d in all_fs:
        d["completion"] = _compute_completion(d, type_schemas)

    # Insert fact sheets (parents first – lists are ordered that way)
    for d in all_fs:
        db.add(FactSheet(**d))
    await db.flush()

    # Insert relations
    for r in RELATIONS:
        db.add(Relation(**r))
    await db.flush()

    # Insert tag groups + tags + assignments
    tag_map: dict[str, uuid.UUID] = {}  # "group:tagname" → tag.id
    for tg_def in TAG_GROUPS:
        tg = TagGroup(
            id=tg_def["id"], name=tg_def["name"],
            description=tg_def.get("description"),
            mode=tg_def.get("mode", "multi"),
            restrict_to_types=tg_def.get("restrict_to_types"),
        )
        db.add(tg)
        for t in tg_def.get("tags", []):
            tag = Tag(id=t["id"], tag_group_id=tg_def["id"],
                      name=t["name"], color=t.get("color"))
            db.add(tag)
            tag_map[f"{tg_def['name']}:{t['name']}"] = t["id"]
    await db.flush()

    for tg_def in TAG_GROUPS:
        for t in tg_def.get("tags", []):
            for ref in t.get("assign_to", []):
                db.add(FactSheetTag(fact_sheet_id=_id(ref), tag_id=t["id"]))
    await db.flush()

    await db.commit()
    return {
        "fact_sheets": len(all_fs),
        "relations": len(RELATIONS),
        "tag_groups": len(TAG_GROUPS),
    }


# ===================================================================
# CLI entry-point:  python -m app.services.seed_demo
# ===================================================================
if __name__ == "__main__":
    import asyncio
    from app.database import async_session
    from app.models import Base
    from app.database import engine
    from app.services.seed import seed_metamodel

    async def _main():
        # Ensure tables exist
        async with engine.begin() as conn:
            await conn.run_sync(Base.metadata.create_all)

        # Seed metamodel first (required for FK constraints)
        async with async_session() as db:
            await seed_metamodel(db)

        # Seed demo data
        async with async_session() as db:
            result = await seed_demo_data(db)
            print(result)

    asyncio.run(_main())
