<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
                  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                  id="Definitions_IncidentManagement"
                  targetNamespace="http://turbo-ea.io/bpmn"
                  exporter="Turbo EA"
                  exporterVersion="1.0">

  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_1" name="Incident Management" processRef="Process_1" />
  </bpmn:collaboration>

  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_ServiceDesk" name="Service Desk">
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_LogIncident</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Classify</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_CloseIncident</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_L2Support" name="L2 Support">
        <bpmn:flowNodeRef>Task_Investigate</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>BoundaryEvent_Timer</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Resolve</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_L3Support" name="L3 Support">
        <bpmn:flowNodeRef>Task_Escalate</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>

    <bpmn:startEvent id="StartEvent_1" name="Incident Reported">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>

    <bpmn:userTask id="Task_LogIncident" name="Log Incident">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:userTask id="Task_Classify" name="Classify">
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:outgoing>Flow_3</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:userTask id="Task_Investigate" name="Investigate">
      <bpmn:incoming>Flow_3</bpmn:incoming>
      <bpmn:outgoing>Flow_4</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:boundaryEvent id="BoundaryEvent_Timer" name="Escalation Timer" attachedToRef="Task_Investigate" cancelActivity="false">
      <bpmn:outgoing>Flow_Escalate</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1">
        <bpmn:timeDuration>PT4H</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>

    <bpmn:userTask id="Task_Escalate" name="Escalate to L3">
      <bpmn:incoming>Flow_Escalate</bpmn:incoming>
      <bpmn:outgoing>Flow_EscalateReturn</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:userTask id="Task_Resolve" name="Resolve">
      <bpmn:incoming>Flow_4</bpmn:incoming>
      <bpmn:incoming>Flow_EscalateReturn</bpmn:incoming>
      <bpmn:outgoing>Flow_5</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:userTask id="Task_CloseIncident" name="Close Incident">
      <bpmn:incoming>Flow_5</bpmn:incoming>
      <bpmn:outgoing>Flow_6</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:endEvent id="EndEvent_1" name="Incident Closed">
      <bpmn:incoming>Flow_6</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_LogIncident" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_LogIncident" targetRef="Task_Classify" />
    <bpmn:sequenceFlow id="Flow_3" sourceRef="Task_Classify" targetRef="Task_Investigate" />
    <bpmn:sequenceFlow id="Flow_4" sourceRef="Task_Investigate" targetRef="Task_Resolve" />
    <bpmn:sequenceFlow id="Flow_Escalate" name="4h timeout" sourceRef="BoundaryEvent_Timer" targetRef="Task_Escalate" />
    <bpmn:sequenceFlow id="Flow_EscalateReturn" sourceRef="Task_Escalate" targetRef="Task_Resolve" />
    <bpmn:sequenceFlow id="Flow_5" sourceRef="Task_Resolve" targetRef="Task_CloseIncident" />
    <bpmn:sequenceFlow id="Flow_6" sourceRef="Task_CloseIncident" targetRef="EndEvent_1" />
  </bpmn:process>

  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">

      <bpmndi:BPMNShape id="Participant_1_di" bpmnElement="Participant_1" isHorizontal="true">
        <dc:Bounds x="160" y="60" width="1100" height="560" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Lane_ServiceDesk_di" bpmnElement="Lane_ServiceDesk" isHorizontal="true">
        <dc:Bounds x="190" y="60" width="1070" height="190" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Lane_L2Support_di" bpmnElement="Lane_L2Support" isHorizontal="true">
        <dc:Bounds x="190" y="250" width="1070" height="190" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Lane_L3Support_di" bpmnElement="Lane_L3Support" isHorizontal="true">
        <dc:Bounds x="190" y="440" width="1070" height="180" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Start Event -->
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="262" y="137" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="237" y="180" width="86" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Log Incident -->
      <bpmndi:BPMNShape id="Task_LogIncident_di" bpmnElement="Task_LogIncident">
        <dc:Bounds x="360" y="115" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Classify -->
      <bpmndi:BPMNShape id="Task_Classify_di" bpmnElement="Task_Classify">
        <dc:Bounds x="520" y="115" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Investigate -->
      <bpmndi:BPMNShape id="Task_Investigate_di" bpmnElement="Task_Investigate">
        <dc:Bounds x="520" y="300" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Boundary Timer Event (attached to Investigate, bottom edge) -->
      <bpmndi:BPMNShape id="BoundaryEvent_Timer_di" bpmnElement="BoundaryEvent_Timer">
        <dc:Bounds x="552" y="362" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="490" y="393" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Escalate to L3 -->
      <bpmndi:BPMNShape id="Task_Escalate_di" bpmnElement="Task_Escalate">
        <dc:Bounds x="620" y="490" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Resolve -->
      <bpmndi:BPMNShape id="Task_Resolve_di" bpmnElement="Task_Resolve">
        <dc:Bounds x="770" y="300" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- Close Incident -->
      <bpmndi:BPMNShape id="Task_CloseIncident_di" bpmnElement="Task_CloseIncident">
        <dc:Bounds x="890" y="115" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>

      <!-- End Event -->
      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <dc:Bounds x="1062" y="137" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1040" y="180" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Edges -->
      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <di:waypoint x="298" y="155" />
        <di:waypoint x="360" y="155" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <di:waypoint x="460" y="155" />
        <di:waypoint x="520" y="155" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_3_di" bpmnElement="Flow_3">
        <di:waypoint x="570" y="195" />
        <di:waypoint x="570" y="300" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_4_di" bpmnElement="Flow_4">
        <di:waypoint x="620" y="340" />
        <di:waypoint x="770" y="340" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Escalate_di" bpmnElement="Flow_Escalate">
        <di:waypoint x="570" y="398" />
        <di:waypoint x="570" y="530" />
        <di:waypoint x="620" y="530" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="575" y="453" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_EscalateReturn_di" bpmnElement="Flow_EscalateReturn">
        <di:waypoint x="720" y="530" />
        <di:waypoint x="820" y="530" />
        <di:waypoint x="820" y="380" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_5_di" bpmnElement="Flow_5">
        <di:waypoint x="870" y="340" />
        <di:waypoint x="940" y="340" />
        <di:waypoint x="940" y="195" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_6_di" bpmnElement="Flow_6">
        <di:waypoint x="990" y="155" />
        <di:waypoint x="1062" y="155" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn:definitions>
