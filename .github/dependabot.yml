# Dependabot configuration
#
# Strategy: security-focused
#   - pip & npm: version updates disabled (open-pull-requests-limit: 0).
#     Dependabot *security* updates still create PRs automatically — that
#     feature is controlled by the repo's Security settings, not this file.
#   - GitHub Actions: monthly version updates kept enabled. Pinning actions
#     to current versions is a supply-chain security best practice.

version: 2
updates:
  # Python (pip) — security updates only
  # Version update PRs are disabled; security PRs bypass this limit.
  - package-ecosystem: "pip"
    directory: "/backend"
    schedule:
      interval: "weekly"
    commit-message:
      prefix: "chore(deps)"
    labels:
      - "dependencies"
      - "security"
      - "backend"
    open-pull-requests-limit: 0

  # npm — security updates only
  # Version update PRs are disabled; security PRs bypass this limit.
  - package-ecosystem: "npm"
    directory: "/frontend"
    schedule:
      interval: "weekly"
    commit-message:
      prefix: "chore(deps)"
    labels:
      - "dependencies"
      - "security"
      - "frontend"
    open-pull-requests-limit: 0

  # GitHub Actions — keep CI actions up to date (supply-chain security)
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "monthly"
    groups:
      # Group all action updates into a single PR
      actions:
        patterns:
          - "*"
    commit-message:
      prefix: "chore(ci)"
    labels:
      - "dependencies"
      - "ci"
    open-pull-requests-limit: 3
